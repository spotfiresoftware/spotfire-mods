<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.147.8"><META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">


<link rel="shortcut icon"  href="/spotfire-mods/favicons/favicon.ico" >


<title>Create a bar chart using Google Charts | Spotfire® Mods</title>
  <meta itemprop="name" content="Create a bar chart using Google Charts">
  <meta itemprop="description" content="This step-by-step tutorial describes how to create a basic bar chart using Google Charts and the Spotfire API.">
  <meta itemprop="datePublished" content="2024-06-14T00:00:00+00:00">
  <meta itemprop="dateModified" content="2024-06-14T00:00:00+00:00">
  <meta itemprop="wordCount" content="2714">



<link rel="preload" href="/spotfire-mods/scss/main.min.715ecd975a53524c234d1aad588bdad28ec7691e9bd523fd977e6698257204a6.css" as="style">
<link href="/spotfire-mods/scss/main.min.715ecd975a53524c234d1aad588bdad28ec7691e9bd523fd977e6698257204a6.css" rel="stylesheet" integrity="">


<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>




    <title>Create a bar chart using Google Charts | Spotfire® Mods</title>
  </head>
  <body class="td-page">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="/spotfire-mods/">
		<span class="navbar-logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 232 40"><path d="M160.46 29.9V10.8h1.8V30h-1.8v-.1zm8.7-5.8-8.3-12.4.6-.5.7-.5 7.9 11.6-.9 1.8zm0 0-.8-1.8 7.8-11.6.7.5.6.5-8.3 12.4zm7.1 5.8V10.8h1.8V30h-1.8v-.1zm12.4.3c-1.3.0-2.5-.3-3.5-.9s-1.8-1.5-2.4-2.5c-.6-1.1-.9-2.3-.9-3.7s.3-2.6.8-3.7c.6-1.1 1.4-1.9 2.4-2.5s2.2-.9 3.5-.9 2.5.3 3.5.9 1.8 1.5 2.4 2.5c.6 1.1.8 2.3.8 3.7s-.3 2.6-.8 3.7-1.3 1.9-2.4 2.5c-.9.6-2.1.9-3.4.9zm0-1.5c1 0 1.9-.2 2.6-.7s1.3-1.1 1.8-2 .6-1.8.6-2.9-.2-2.1-.6-2.9c-.4-.8-1-1.5-1.8-2s-1.6-.7-2.6-.7-1.9.2-2.6.7c-.8.5-1.4 1.1-1.8 2-.4.8-.6 1.8-.6 2.9s.2 2.1.7 2.9c.4.8 1 1.5 1.8 2s1.5.7 2.5.7zm15.3 1.5c-1.2.0-2.3-.3-3.2-.9s-1.7-1.5-2.2-2.5c-.5-1.1-.8-2.3-.8-3.7s.3-2.6.8-3.7 1.3-1.9 2.2-2.5 2-.9 3.2-.9 2.2.3 3.1.9c.9.6 1.6 1.5 2.1 2.5.5 1.1.8 2.3.8 3.7s-.3 2.6-.8 3.7-1.2 1.9-2.1 2.5-1.9.9-3.1.9zm.3-1.4c.9.0 1.7-.2 2.3-.7.7-.5 1.2-1.2 1.6-2 .4-.9.6-1.8.6-3 0-1.1-.2-2.1-.6-3s-.9-1.5-1.6-2-1.5-.7-2.4-.7-1.8.2-2.5.7-1.3 1.2-1.7 2c-.4.9-.6 1.8-.6 3 0 1.1.2 2.1.6 3s1 1.5 1.7 2 1.7.7 2.6.7zm4.6 1.1-.1-2.5V10.8h1.6V30h-1.5v-.1zm10.3.3c-1 0-1.9-.2-2.7-.5-.7-.3-1.4-.7-1.8-1.2-.5-.5-.8-1-1-1.5l1.5-.5c.3.7.8 1.2 1.5 1.6s1.4.6 2.2.6c1 0 1.8-.2 2.5-.6s1-1 1-1.7-.2-1.2-.7-1.6-1.2-.8-2.2-1l-1.3-.4c-1.2-.3-2.2-.8-2.8-1.4s-1-1.3-1-2.1c0-1.3.4-2.2 1.2-2.9s2.1-1.1 3.8-1.1c.8.0 1.5.1 2.1.3s1.2.6 1.6 1 .8.9 1 1.5l-1.5.6c-.3-.7-.7-1.2-1.3-1.5s-1.3-.4-2.2-.4c-1 0-1.7.2-2.3.6s-.8 1-.8 1.7c0 .4.2.8.7 1.2s1.1.7 2 .9l1.2.3c.9.2 1.7.5 2.3.9s1.1.9 1.5 1.4.5 1.1.5 1.8c0 .8-.2 1.5-.6 2.1s-1 1-1.7 1.4c-.9.4-1.8.5-2.7.5zM117.392 29.942h2.709a.222.222.0 00.225-.219v-13.93a.222.222.0 00-.225-.219h-2.634a.222.222.0 00-.225.219v14.003c0 .081.067.146.15.146zm7.989-12.57v-1.578a.222.222.0 00-.225-.219h-2.634a.222.222.0 00-.225.219v13.93c0 .121.101.219.225.219h2.634a.222.222.0 00.225-.219v-7.329c0-1.476.311-2.513.933-3.111.622-.597 1.537-.896 2.746-.896h.559a.222.222.0 00.225-.219v-2.667a.224.224.0 00-.231-.221c-.93.029-1.742.234-2.433.616a4.772 4.772.0 00-1.662 1.514c-.041.061-.137.035-.137-.038zM87.727 18.219c2.815.0 5.046 2.484 4.507 5.32-.338 1.781-1.807 3.212-3.635 3.542-2.911.525-5.459-1.649-5.459-4.392.0-2.465 2.058-4.471 4.587-4.471m0-2.98c-4.509.0-8.107 3.804-7.598 8.299.387 3.417 3.221 6.179 6.727 6.556 4.613.497 8.516-3.01 8.516-7.404.0-4.115-3.423-7.451-7.646-7.451zm27.987-3.792V8.991a.227.227.0 00-.215-.221c-2.029-.089-4.069.347-5.129 1.308-1.097.995-1.646 2.45-1.646 4.365v1.131h-2.415a.222.222.0 00-.225.219v2.374c0 .121.101.219.225.219h2.407v11.336c0 .121.101.219.225.219h2.661a.222.222.0 00.225-.219V18.386h3.65a.222.222.0 00.225-.219v-2.374a.222.222.0 00-.225-.219h-3.662v-1.131c0-1.971 1.549-2.897 3.657-2.779a.224.224.0 00.242-.218z" fill="#333c66"/><ellipse cx="118.793" cy="10.634" rx="1.885" ry="1.837" fill="#333c66"/><path d="M78.029 18.508a6.836 6.836.0 00-2.74-2.531 7.943 7.943.0 00-3.646-.864 7.76 7.76.0 00-1.596.167 7.77 7.77.0 00-2.006.717 6.893 6.893.0 00-1.024.652c-.049.038-.12.005-.12-.056v-1.007a.223.223.0 00-.225-.22h-2.634a.222.222.0 00-.225.22v19.815c0 .121.101.219.225.219h2.639a.219.219.0 00.221-.216v-7.558c0-.068.084-.098.13-.047.539.602 1.217 1.11 2.034 1.524.889.451 1.906.675 3.051.672l.149-.006a7.614 7.614.0 003.028-.878c1.134-.603 2.048-1.479 2.74-2.631.692-1.151 1.039-2.491 1.039-4.017s-.347-2.845-1.039-3.957zm-6.365 8.44c-2.453.0-4.442-2.002-4.442-4.471s1.989-4.471 4.442-4.471 4.442 2.002 4.442 4.471-1.989 4.471-4.442 4.471zM60.825 20.631c-.806-.926-1.985-1.661-3.603-2.246l-2.111-.771c-2.111-.761-3.183-1.424-3.183-2.938.0-1.555 1.665-2.368 3.31-2.368.952.0 1.806.232 2.585.705.68.413 1.541.409 2.2-.036l1.154-.779c.261-.176.28-.328.191-.425-1.525-1.651-3.68-2.557-6.1-2.557-1.904.0-3.616.541-4.821 1.523-1.26 1.027-1.926 2.467-1.926 4.166.0 2.698 1.56 4.506 4.908 5.69l2.287.8c2.06.738 2.978 1.697 2.978 3.11.0 1.495-1.397 2.54-3.398 2.54-1.394.0-2.66-.453-3.68-1.298-.696-.577-1.691-.651-2.442-.144l-.981.662c-.286.193-.326.367-.241.497 1.37 2.089 4.106 3.375 7.227 3.375 2.008.0 3.732-.551 4.985-1.594 1.267-1.054 1.937-2.52 1.937-4.238.014-1.469-.403-2.67-1.276-3.673zm43.86-2.244a.222.222.0 00.225-.22v-2.368a.222.222.0 00-.225-.219h-3.661v-3.697a.217.217.0 00-.219-.216h-2.669a.218.218.0 00-.221.215v3.697h-2.408a.222.222.0 00-.225.22v2.368c0 .121.101.219.225.219h2.408v7.501c0 1.429.369 2.461 1.109 3.096.739.635 1.803.953 3.192.953h2.474a.222.222.0 00.225-.22v-2.074a.223.223.0 00-.225-.22h-1.933c-.631.0-1.078-.119-1.339-.357-.262-.238-.392-.63-.392-1.178v-7.501h3.66zm33.042 8.952c-1.203.0-2.219-.288-3.053-.864-.834-.577-1.367-1.661-1.598-2.738h11.374a.227.227.0 00.224-.194c.059-.44.089-.8.089-1.081.0-1.555-.355-2.495-1.149-3.882-.238-.416-.557-.791-.901-1.158-1.367-1.453-3.116-2.182-5.248-2.182-2.249.0-4.089.714-5.523 2.139-1.434 1.428-2.152 3.198-2.152 5.313.0 2.153.727 3.935 2.181 5.341 1.453 1.408 3.362 2.11 5.727 2.11 2.487.0 4.432-.811 5.841-2.424a.218.218.0 00-.022-.306l-.689-.609c-.668-.59-1.667-.679-2.413-.186-.725.48-1.621.72-2.688.72zm-3.198-8.386c.775-.624 1.745-.935 2.907-.935 1.027.0 1.924.293 2.69.878.75.574 1.234 1.164 1.453 2.282.004.023.01.044.015.067h-8.547c.212-1.077.708-1.669 1.483-2.292zM33.715 19.52l-.019-.222-.034-.472-.058-.454a5.052 5.052.0 00-.07-.451l-.084-.466-.06-.262c-.047-.208-.095-.424-.157-.627a13.622 13.622.0 00-.618-1.751 14.48 14.48.0 00-.849-1.643A13.563 13.563.0 0028.01 9.145c-.174-.131-.349-.242-.534-.36-.081-.052-.162-.103-.242-.156-.08-.044-.17-.097-.261-.15-.182-.106-.353-.207-.534-.295a13.4 13.4.0 00-1.696-.741 14.16 14.16.0 00-1.775-.498l-.454-.083a5.386 5.386.0 00-.449-.071l-.466-.06-.458-.033-.234-.019-.225-.005-.461-.011-.462.011-.236.006-.221.019-.47.035-.452.058c-.146.016-.296.04-.449.07l-.464.085a13.371 13.371.0 00-3.998 1.534c-.091.053-.181.106-.273.158l-.23.149c-.185.118-.36.229-.529.356A13.571 13.571.0 008.673 13.18a14.566 14.566.0 00-.847 1.639 13.627 13.627.0 00-.616 1.743c-.064.21-.112.425-.159.633l-.062.273-.082.452a5.08 5.08.0 00-.07.451l-.059.468-.033.46-.019.235-.005.226-.011.47.011.461.006.235.019.224.034.47.058.456c.016.146.039.293.07.451l.084.463c.019.078.039.166.058.254a13.622 13.622.0 00.777 2.386c.209.49.479 1.012.849 1.643a13.614 13.614.0 004.282 4.382l.251.161c.08.044.17.098.261.151.181.107.352.208.533.294.482.259 1.018.493 1.696.741.371.134.723.245 1.07.338v-1.723a3.634 3.634.0 00-1.434-2.656l-.014-.01a566.35 566.35.0 01-.386-.291l-.31-.233-.065-.049-.052-.037a9.907 9.907.0 01-1.973-1.847 11.055 11.055.0 01-.782-1.107c-.255-.44-.456-.811-.622-1.207a9.62 9.62.0 01-.449-1.274 4.03 4.03.0 01-.105-.41 6.596 6.596.0 00-.055-.234l-.06-.342a3.302 3.302.0 01-.053-.342l-.043-.323-.024-.347-.013-.164-.004-.179-.009-.333.009-.347.004-.167.014-.178.023-.33.045-.343a3.08 3.08.0 01.054-.343l.056-.32c.023-.093.041-.171.058-.249.031-.138.063-.281.109-.422.115-.445.29-.889.445-1.262.179-.426.403-.829.619-1.201.28-.443.528-.795.785-1.112a9.96 9.96.0 011.981-1.853c.11-.086.235-.164.355-.241.067-.043.134-.085.2-.13l.008-.006.009-.005c.073-.039.144-.081.215-.123.119-.07.243-.143.374-.205a9.694 9.694.0 011.227-.536c.366-.134.765-.247 1.296-.367l.335-.059c.111-.023.225-.041.342-.054l.324-.043.344-.024.163-.013.179-.004.332-.009.344.009.166.004.177.014.329.023.342.045a3.1 3.1.0 01.342.054l.319.056c.54.122.939.235 1.304.368.35.129.806.307 1.238.541.121.056.245.129.364.199.071.042.143.084.215.123l.009.005.008.006c.065.045.133.087.2.13.12.076.245.155.363.246a9.895 9.895.0 011.972 1.846c.258.319.506.67.782 1.107.219.379.443.782.622 1.207.156.374.331.817.449 1.274.043.129.074.272.105.409.017.078.035.157.055.234l.06.342c.023.11.041.224.053.342l.043.325.024.345.013.164.004.179.009.335-.009.345-.004.167-.014.177-.023.332-.045.341a3.08 3.08.0 01-.054.343l-.056.32a8.908 8.908.0 00-.058.249c-.031.138-.063.28-.108.421a9.376 9.376.0 01-.445 1.262c-.166.397-.368.767-.619 1.201-.275.437-.53.799-.785 1.113a9.956 9.956.0 01-2.037 1.891l-.054.042-.31.233-.383.288-.021.015a3.636 3.636.0 00-1.43 2.665v1.712a13.17 13.17.0 001.07-.338 12.77 12.77.0 001.687-.737 7.13 7.13.0 00.541-.299c.091-.053.181-.107.273-.158.071-.047.154-.101.238-.154a13.634 13.634.0 004.284-4.387c.367-.626.637-1.148.847-1.639a13.627 13.627.0 00.777-2.384l.06-.264.082-.45c.032-.161.055-.308.07-.451l.059-.469.033-.458.019-.237.005-.224.011-.47-.011-.461-.006-.237z" fill="#333c66"/><ellipse cx="20.22" cy="20" rx="5.227" ry="5.17" fill="#e94165"/><path d="M20.22 3.65c4.428.0 8.589 1.704 11.717 4.798 3.121 3.087 4.84 7.19 4.84 11.552s-1.719 8.465-4.84 11.552c-3.128 3.094-7.289 4.798-11.717 4.798s-8.589-1.704-11.717-4.798c-3.121-3.087-4.84-7.19-4.84-11.552s1.719-8.465 4.84-11.552C11.631 5.354 15.792 3.65 20.22 3.65m0-3.65C9.053.0.0 8.954.0 20s9.053 20 20.22 20 20.22-8.954 20.22-20S31.387.0 20.22.0zM145.845 15.333a1.917 1.917.0 01-1.917-1.917 1.894 1.894.0 01.561-1.362 1.933 1.933.0 012.108-.412 1.921 1.921.0 011.022 1.022c.1.231.149.483.149.752a1.906 1.906.0 01-.561 1.356 1.897 1.897.0 01-1.362.561zm0-.397c.298.0.561-.064.788-.192s.405-.306.532-.536c.128-.229.192-.493.192-.791.0-.303-.064-.568-.192-.795a1.398 1.398.0 00-.532-.536 1.558 1.558.0 00-.788-.195c-.293.0-.554.065-.781.195s-.405.309-.532.536-.192.492-.192.795c0 .298.064.562.192.791.128.229.305.408.532.536s.487.192.781.192zm-.717-.511v-2.072h.745c.213.0.388.06.525.181s.206.28.206.479a.605.605.0 01-.11.355.671.671.0 01-.295.234l.49.823h-.419l-.426-.752h-.348v.752h-.369zm.369-1.093h.39a.333.333.0 00.238-.089.3.3.0 00.096-.231.304.304.0 00-.099-.238.38.38.0 00-.262-.089h-.362v.646z" fill="#333c66"/></svg></span><span class="text-uppercase font-weight-bold"></span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				<a class="nav-link" 
				href="/spotfire-mods/about/" 
				>
				<span>About</span></a>
				
				
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				<a class="nav-link active" 
				href="/spotfire-mods/docs/" 
				>
				<span class="active">Working with mods</span></a>
				
				
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				<span class="nav-link active hasChildren">
					<span  class="active">API documentation</span>
				</span>
				
				
				<ul class="navbar-subnav top">
					
					<li class="nav-item">
						<span class="active">Action mods</span>

						
						
						<ul class="navbar-subnav">
							
							<li class="nav-item">
								<a class="nav-link active" 
								href="/spotfire-mods/api-docs/action-mods/index.html" 
								>
								<span class="active">API documentation</span></a>
									</li>
							
						</ul>
						
		

					</li>
					
					<li class="nav-item">
						<span class="active">Visualization mods</span>

						
						
						<ul class="navbar-subnav">
							
							<li class="nav-item">
								<a class="nav-link active" 
								href="/spotfire-mods/overview/" 
								>
								<span class="active">API Overview</span></a>
									</li>
							
							<li class="nav-item">
								<a class="nav-link active" 
								href="/spotfire-mods/api-docs/visualization-mods/index.html" 
								>
								<span class="active">API documentation</span></a>
									</li>
							
						</ul>
						
		

					</li>
					
				</ul>
				
			</li>
			
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block">
</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            




<div id="td-sidebar-menu" class="td-sidebar__inner">
  
  <form class="td-sidebar__search d-flex align-items-center d-lg-none">
    

    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  
  <nav class="collapse td-sidebar-nav" id="td-section-nav">
    
    
    






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/spotfire-mods/docs/" class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Working with mods</a>
  </li>
  <ul>
    <li class="collapse show" id="spotfire-modsdocs">
      
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/spotfire-mods/docs/whats-new/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">What&#39;s new?</a>
  </li>
  <ul>
    <li class="collapse " id="spotfire-modsdocswhats-new">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-spotfire-modsdocsgetting-started" href="/spotfire-mods/docs/getting-started/">Getting started</a>
        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/spotfire-mods/docs/action-mods/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Action mods</a>
  </li>
  <ul>
    <li class="collapse " id="spotfire-modsdocsaction-mods">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-spotfire-modsdocsaction-modsdeveloping-action-mods" href="/spotfire-mods/docs/action-mods/developing-action-mods/">Developing action mods</a>
        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/spotfire-mods/docs/action-mods/tutorial/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Tutorial</a>
  </li>
  <ul>
    <li class="collapse " id="spotfire-modsdocsaction-modstutorial">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/spotfire-mods/docs/action-mods/snippets/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Snippets</a>
  </li>
  <ul>
    <li class="collapse " id="spotfire-modsdocsaction-modssnippets">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/spotfire-mods/docs/action-mods/using-the-api/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Using the API</a>
  </li>
  <ul>
    <li class="collapse " id="spotfire-modsdocsaction-modsusing-the-api">
      
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/spotfire-mods/docs/action-mods/using-the-api/parameter-types/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Parameter types</a>
  </li>
  <ul>
    <li class="collapse " id="spotfire-modsdocsaction-modsusing-the-apiparameter-types">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-spotfire-modsdocsaction-modsusing-the-apiapi-docs" href="/spotfire-mods/docs/action-mods/using-the-api/api-docs/">Action mods API documentation</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-spotfire-modsdocsaction-modsusing-the-apimod-schema" href="/spotfire-mods/docs/action-mods/using-the-api/mod-schema/">Mod schema</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/spotfire-mods/docs/action-mods/faq/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">FAQ</a>
  </li>
  <ul>
    <li class="collapse " id="spotfire-modsdocsaction-modsfaq">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/spotfire-mods/docs/visualization-mods/" class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Visualization mods</a>
  </li>
  <ul>
    <li class="collapse show" id="spotfire-modsdocsvisualization-mods">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-spotfire-modsdocsvisualization-modsdeveloping-visualization-mods" href="/spotfire-mods/docs/visualization-mods/developing-visualization-mods/">Developing visualization mods</a>
        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/spotfire-mods/docs/visualization-mods/tutorials/" class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Tutorials</a>
  </li>
  <ul>
    <li class="collapse show" id="spotfire-modsdocsvisualization-modstutorials">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page  active" id="m-spotfire-modsdocsvisualization-modstutorialsbarchart-googlechart" href="/spotfire-mods/docs/visualization-mods/tutorials/barchart-googlechart/">Create a bar chart using Google Charts</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-spotfire-modsdocsvisualization-modstutorialsmod-icons" href="/spotfire-mods/docs/visualization-mods/tutorials/mod-icons/">Create an icon for your visualization mod</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/spotfire-mods/docs/visualization-mods/using-the-api/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Using the API</a>
  </li>
  <ul>
    <li class="collapse " id="spotfire-modsdocsvisualization-modsusing-the-api">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-spotfire-modsdocsvisualization-modsusing-the-apiapi-overview" href="/spotfire-mods/docs/visualization-mods/using-the-api/api-overview/">API overview</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-spotfire-modsdocsvisualization-modsusing-the-apiapi-docs" href="/spotfire-mods/docs/visualization-mods/using-the-api/api-docs/">Visualization mods API documentation</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-spotfire-modsdocsvisualization-modsusing-the-apimod-data-views" href="/spotfire-mods/docs/visualization-mods/using-the-api/mod-data-views/">Mod data views</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-spotfire-modsdocsvisualization-modsusing-the-apimod-schema" href="/spotfire-mods/docs/visualization-mods/using-the-api/mod-schema/">Mod schema</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-spotfire-modsdocsvisualization-modsusing-the-apiworking-with-readables" href="/spotfire-mods/docs/visualization-mods/using-the-api/working-with-readables/">Mod reader</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/spotfire-mods/docs/visualization-mods/faq/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">FAQ</a>
  </li>
  <ul>
    <li class="collapse " id="spotfire-modsdocsvisualization-modsfaq">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-spotfire-modsdocsvisualization-modsgetting-started-11" href="/spotfire-mods/docs/visualization-mods/getting-started-11/">Getting started (before 14.4)</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
    </li>
  </ul>
</ul>

  </nav>
</div>




          </div>
          <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
            






<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">












<a href="https://github.com/spotfiresoftware/spotfire-mods/issues/new?title=Create%20a%20bar%20chart%20using%20Google%20Charts" target="_blank"><i class="fab fa-github fa-fw"></i> Create documentation issue</a>


<a href="https://github.com/spotfiresoftware/spotfire-mods/issues/new" target="_blank"><i class="fas fa-tasks fa-fw"></i> Create project issue</a>





</div>






<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#dataset">Dataset</a></li>
        <li><a href="#prerequisites">Prerequisites</a></li>
        <li><a href="#1-initial-setup">1. Initial setup</a></li>
        <li><a href="#2-add-google-charts-library">2. Add Google Charts library</a></li>
        <li><a href="#3-consume-spotfire-data">3. Consume Spotfire data</a></li>
        <li><a href="#4-selectionmarking">4. Selection/marking</a></li>
        <li><a href="#5-controlling-the-mod-using-a-popout">5. Controlling the mod using a popout</a></li>
        <li><a href="#6-use-spotfire-theme-and-styling">6. Use Spotfire theme and styling</a></li>
        <li><a href="#7-prepare-for-export">7. Prepare for export</a></li>
      </ul>
    </li>
  </ul>
</nav>



          </div>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
	<ol class="breadcrumb spb-1">
		













<li class="breadcrumb-item" >
	<a href="/spotfire-mods/docs/">Working with mods</a>
</li>




<li class="breadcrumb-item" >
	<a href="/spotfire-mods/docs/visualization-mods/">Visualization mods</a>
</li>




<li class="breadcrumb-item" >
	<a href="/spotfire-mods/docs/visualization-mods/tutorials/">Tutorials</a>
</li>




<li class="breadcrumb-item active" aria-current="page">
	<a href="/spotfire-mods/docs/visualization-mods/tutorials/barchart-googlechart/">Create a bar chart using Google Charts</a>
</li>

	</ol>
</nav	>

            



<p class="-text-primary pt-3 h6" >Reading time: 12 minutes and 45 seconds.</p>
<p>
<div class="td-content">
	<h1>Create a bar chart using Google Charts</h1>
    <div class="lead">This step-by-step tutorial describes how to create a basic bar chart using Google Charts and the Spotfire API.</div>
	       
	<p>We will be using the Spotfire API and <a href="https://developers.google.com/chart">Google Charts</a> to create a basic bar chart.</p>
<p>This tutorial will cover the following:</p>
<ul>
<li>Initial setup</li>
<li>Consuming and visualizing data</li>
<li>Selection/marking</li>
<li>Theme-ing</li>
<li>Controlling the mod using a popout</li>
<li>Export to PDF</li>
</ul>
<p>The mod created in this tutorial (<code>'js-dev-barchart-googlecharts'</code>), as well as the starter project used in the tutorial (<code>'js-dev-starter'</code>), can be found among the <a href="http://spotfi.re/mods-examples">example projects</a>. The example project covers some additional cases that are outside the scope of this tutorial.</p>
<h3 id="dataset">Dataset</h3>
<p>The dataset used in this tutorial can be found <a href="/spotfire-mods/docs/visualization-mods/tutorials/barchart-googlechart/heroes.txt">here</a>. It is a reduced version of this <a href="https://www.kaggle.com/claudiodavi/superhero-set">dataset</a>.</p>
<h3 id="prerequisites">Prerequisites</h3>
<p>All prerequisites are listed in the general <a href="/spotfire-mods/docs/getting-started/#prerequisites">getting started guide</a>.</p>
<hr>
<h3 id="1-initial-setup">1. Initial setup</h3>
<ul>
<li>Create a visualization mod using the <a href="/spotfire-mods/docs/getting-started/#1-create-a-new-project">SDK</a>, follow the initial instructions and then open the project in Visual Studio Code.</li>
<li>In Visual Studio Code start the <a href="/spotfire-mods/docs/getting-started/#2-start-the-local-development-servers">local development server</a>.</li>
<li>In Spotfire, load the <a href="/spotfire-mods/docs/visualization-mods/tutorials/barchart-googlechart/#dataset">dataset</a> to create a new analysis file.</li>
<li>Go to <em>Tools &gt; Development &gt; Mods development</em> and click the button <em>Connect to development server</em>. Make sure that the default server is the same in Spotfire and Visual Studio code (http://127.0.0.1:8090).</li>
<li>You should see some mod metadata on the screen, which means the mod is working.</li>
<li>Click <em>Add to page</em> to add a first instance of your new visualization mod.</li>
</ul>
<p><img src="/spotfire-mods/docs/visualization-mods/tutorials/barchart-googlechart/images/step1.PNG" alt="Step 1"></p>
<hr>
<h3 id="2-add-google-charts-library">2. Add Google Charts library</h3>
<ul>
<li>We will be using <a href="https://developers.google.com/chart/interactive/docs/gallery/barchart">this</a> Google example.</li>
<li>Add the Google Chart loader script to <code>index.html</code> (before the <code>build/main.jss</code> script).</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-diff" data-lang="diff"><span style="display:flex;"><span>     &lt;body&gt;
</span></span><span style="display:flex;"><span>         &lt;div id=&#34;mod-container&#34;&gt;&lt;/div&gt;
</span></span><span style="display:flex;"><span>         &lt;script id=&#34;spotfire-loader&#34;&gt;var Spotfire=function(e){&#34;use strict&#34;;return e.initialize=function(e){var t=&#34;sfTemp&#34;+1e4*Math.random()+&#34;Cb&#34;,a=window;a[t]=e;var r={subject:&#34;GetUrl&#34;,callbackId:-1,...&lt;/script&gt;
</span></span><span style="display:flex;"><span><span style="color:#00a000">+        &lt;script type=&#34;text/javascript&#34; src=&#34;https://www.gstatic.com/charts/loader.js&#34;&gt;&lt;/script&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#00a000"></span>         &lt;script src=&#34;build/main.js&#34;&gt;&lt;/script&gt;
</span></span><span style="display:flex;"><span>     &lt;/body&gt;
</span></span><span style="display:flex;"><span> &lt;/html&gt;
</span></span></code></pre></div><ul>
<li>Add type definitions from google.visualization by installing the corresponding npm package:</li>
</ul>
<p><code>npm install --save @types/google.visualization</code></p>
<ul>
<li>Update the style in the <code>main.css</code> file.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-diff" data-lang="diff"><span style="display:flex;"><span><span style="color:#a40000">-body{
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">-    margin: 0;
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">-    overflow: hidden;
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">-}
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span>
</span></span><span style="display:flex;"><span><span style="color:#a40000">-#mod-container {
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">-    white-space: pre;
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">-}
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span>
</span></span><span style="display:flex;"><span><span style="color:#00a000">+html, body, #mod-container {
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+    margin: 0;
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+    height: 100%;
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+    overflow: hidden;
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+}
</span></span></span></code></pre></div><ul>
<li>Add the <em>gstatic</em> domain name as an external resource in the <code>mod-manifest.json</code>. External resources from unknown domains will be blocked from loading for security reasons.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-diff" data-lang="diff"><span style="display:flex;"><span>    &#34;files&#34;: [
</span></span><span style="display:flex;"><span>        &#34;index.html&#34;,
</span></span><span style="display:flex;"><span>        &#34;main.css&#34;,
</span></span><span style="display:flex;"><span>        &#34;main.js&#34;
</span></span><span style="display:flex;"><span><span style="color:#a40000">-    ]
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span><span style="color:#00a000">+    ],
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+    &#34;externalResources&#34;: [&#34;https://www.gstatic.com/&#34;]
</span></span></span></code></pre></div><ul>
<li>Paste the example code below into <code>main.ts</code> inside the <code>render</code> function</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-diff" data-lang="diff"><span style="display:flex;"><span>     async function render(dataView: Spotfire.DataView, windowSize: Spotfire.Size, prop: Spotfire.ModProperty&lt;string&gt;) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        /**
</span></span><span style="display:flex;"><span>         * Check the data view for errors
</span></span><span style="display:flex;"><span>         */
</span></span><span style="display:flex;"><span>        let errors = await dataView.getErrors();
</span></span><span style="display:flex;"><span>        if (errors.length &gt; 0) {
</span></span><span style="display:flex;"><span>            // Showing an error overlay will hide the mod iframe.
</span></span><span style="display:flex;"><span>            // Clear the mod content here to avoid flickering effect of
</span></span><span style="display:flex;"><span>            // an old configuration when next valid data view is received.
</span></span><span style="display:flex;"><span>            mod.controls.errorOverlay.show(errors);
</span></span><span style="display:flex;"><span>            return;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        mod.controls.errorOverlay.hide();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        /**
</span></span><span style="display:flex;"><span>         * Get the hierarchy of the categorical X-axis.
</span></span><span style="display:flex;"><span>         */
</span></span><span style="display:flex;"><span>        const xHierarchy = await dataView.hierarchy(&#34;X&#34;);
</span></span><span style="display:flex;"><span>        const xRoot = await xHierarchy.root();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        if (xRoot == null) {
</span></span><span style="display:flex;"><span>            // User interaction caused the data view to expire.
</span></span><span style="display:flex;"><span>            // Don&#39;t clear the mod content here to avoid flickering.
</span></span><span style="display:flex;"><span>            return;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a40000">-        /**
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">-         * Print out to document
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">-         */
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">-        const container = document.querySelector(&#34;#mod-container&#34;);
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">-        container.textContent = `windowSize: ${windowSize.width}x${windowSize.height}\r\n`;
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">-        container.textContent += `should render: ${rows.length} rows\r\n`;
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">-        container.textContent += `${prop.name}: ${prop.value()}`;
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">-
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">-        /**
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">-         * Signal that the mod is ready for export.
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">-         */
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">-        context.signalRenderComplete();
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span>
</span></span><span style="display:flex;"><span><span style="color:#00a000">+        google.charts.load(&#34;current&#34;, { packages: [&#34;corechart&#34;] });
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+        google.charts.setOnLoadCallback(drawChart);
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+        function drawChart() {
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            var data = google.visualization.arrayToDataTable([
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                [&#34;Element&#34;, &#34;Density&#34;, { role: &#34;style&#34; }],
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                [&#34;Copper&#34;, 8.94, &#34;#b87333&#34;],
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                [&#34;Silver&#34;, 10.49, &#34;silver&#34;],
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                [&#34;Gold&#34;, 19.3, &#34;gold&#34;],
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                [&#34;Platinum&#34;, 21.45, &#34;color: #e5e4e2&#34;]
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            ]);
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            var view = new google.visualization.DataView(data);
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            view.setColumns([0, 1, { calc: &#34;stringify&#34;, sourceColumn: 1, type: &#34;string&#34;, role: &#34;annotation&#34; }, 2]);
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            var options = {
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                title: &#34;Density of Precious Metals, in g/cm^3&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                width: 600,
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                height: 400,
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                bar: { groupWidth: &#34;95%&#34; },
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                legend: { position: &#34;none&#34; },
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            };
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            var chart = new google.visualization.BarChart(document.getElementById(&#34;barchart_values&#34;));
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            chart.draw(view, options);
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+        }
</span></span></span><span style="display:flex;"><span><span style="color:#00a000"></span>     }
</span></span><span style="display:flex;"><span> });
</span></span></code></pre></div><ul>
<li>Update the bar chart container ID (in  <code>index.html</code>, our container ID is <code>&quot;mod-container&quot;</code>).
Also note that there is a warning from TypeScript that the argument to the <code>BarChart</code> may be null. Since we are in full control of the html code, it is safe to assert that <code>getElementById</code> will not return null.
This is done by adding an exclamation mark (<code>!</code>) after the argument.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-diff" data-lang="diff"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            var options = {
</span></span><span style="display:flex;"><span>               title: &#34;Density of Precious Metals, in g/cm^3&#34;,
</span></span><span style="display:flex;"><span>               width: 600,
</span></span><span style="display:flex;"><span>               height: 400,
</span></span><span style="display:flex;"><span>               bar: { groupWidth: &#34;95%&#34; },
</span></span><span style="display:flex;"><span>               legend: { position: &#34;none&#34; },
</span></span><span style="display:flex;"><span>           };
</span></span><span style="display:flex;"><span><span style="color:#a40000">-            var chart = new google.visualization.BarChart(document.getElementById(&#34;barchart_values&#34;));
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span><span style="color:#00a000">+            var chart = new google.visualization.BarChart(document.getElementById(&#34;mod-container&#34;)!);
</span></span></span><span style="display:flex;"><span><span style="color:#00a000"></span>            chart.draw(view, options);
</span></span></code></pre></div><p>Also note that there is a warning about the option type. This is because the type is here deduced from usage, not from declaration. This is easily fixed by specifying the correct type for the <code>options</code> variable.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-diff" data-lang="diff"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a40000">-            var options = {
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span><span style="color:#00a000">+            var options: google.visualization.BarChartOptions = {
</span></span></span><span style="display:flex;"><span><span style="color:#00a000"></span>               title: &#34;Density of Precious Metals, in g/cm^3&#34;,
</span></span><span style="display:flex;"><span>               width: 600,
</span></span><span style="display:flex;"><span>               height: 400,
</span></span><span style="display:flex;"><span>               bar: { groupWidth: &#34;95%&#34; },
</span></span><span style="display:flex;"><span>               legend: { position: &#34;none&#34; },
</span></span><span style="display:flex;"><span>           };
</span></span></code></pre></div><ul>
<li>Save the changes. You should see the example working in Spotfire and there should be no warnings in the code editor.</li>
</ul>
<p><img src="/spotfire-mods/docs/visualization-mods/tutorials/barchart-googlechart/images/step2.PNG" alt="Step 2"></p>
<ul>
<li>Use <code>async</code>/<code>await</code> to get rid of extra code.</li>
<li>Make the chart fit the screen by providing a chart area with some predefined margins.</li>
<li>Get rid of the chart title.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-diff" data-lang="diff"><span style="display:flex;"><span><span style="color:#a40000">-       google.charts.load(&#34;current&#34;, { packages: [&#34;corechart&#34;] });
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">-       google.charts.setOnLoadCallback(drawChart);
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span>
</span></span><span style="display:flex;"><span><span style="color:#a40000">-       async function drawChart() {
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span><span style="color:#00a000">+       await google.charts.load(&#34;current&#34;, { packages: [&#34;corechart&#34;] });
</span></span></span><span style="display:flex;"><span><span style="color:#00a000"></span>          var data = google.visualization.arrayToDataTable([
</span></span><span style="display:flex;"><span>              [&#34;Element&#34;, &#34;Density&#34;, { role: &#34;style&#34; }],
</span></span><span style="display:flex;"><span>              [&#34;Copper&#34;, 8.94, &#34;#b87333&#34;],
</span></span><span style="display:flex;"><span>              [&#34;Silver&#34;, 10.49, &#34;silver&#34;],
</span></span><span style="display:flex;"><span>              [&#34;Gold&#34;, 19.3, &#34;gold&#34;],
</span></span><span style="display:flex;"><span>              [&#34;Platinum&#34;, 21.45, &#34;color: #e5e4e2&#34;]
</span></span><span style="display:flex;"><span>          ]);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>          var view = new google.visualization.DataView(data);
</span></span><span style="display:flex;"><span>          view.setColumns([0, 1, { calc: &#34;stringify&#34;, sourceColumn: 1, type: &#34;string&#34;, role: &#34;annotation&#34; }, 2]);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>          var options: google.visualization.BarChartOptions = {
</span></span><span style="display:flex;"><span><span style="color:#a40000">-             title: &#34;Density of Precious Metals, in g/cm^3&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">-             width: 600,
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">-             height: 400,
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span>              bar: { groupWidth: &#34;95%&#34; },
</span></span><span style="display:flex;"><span>              legend: { position: &#34;none&#34; },
</span></span><span style="display:flex;"><span><span style="color:#00a000">+             chartArea: { left: 85, top: 20, right: 10, bottom: 40 }
</span></span></span><span style="display:flex;"><span><span style="color:#00a000"></span>          };
</span></span><span style="display:flex;"><span>          var chart = new google.visualization.BarChart(document.getElementById(&#34;mod-container&#34;));
</span></span><span style="display:flex;"><span>          chart.draw(view, options);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span><span style="color:#a40000">-     }
</span></span></span></code></pre></div><hr>
<h3 id="3-consume-spotfire-data">3. Consume Spotfire data</h3>
<ul>
<li>The <code>mod-manifest.json</code> file declares three axes; a categorical X-axis, a continuous Y-axis, and a dual mode color axis. While it is perfectly valid for a bar chart,
we&rsquo;ll make this tutorial slightly simpliflied by changing the color axis to categorical. Note that changing the <code>mod-manifest.json</code> requires an explicit reload in the <em>Mods development</em> tool.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-diff" data-lang="diff"><span style="display:flex;"><span>    &#34;dataViewDefinition&#34;: {
</span></span><span style="display:flex;"><span>        &#34;colorAxis&#34;: {
</span></span><span style="display:flex;"><span><span style="color:#a40000">-            &#34;mode&#34;: &#34;dual&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span><span style="color:#00a000">+            &#34;mode&#34;: &#34;categorical&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#00a000"></span>            &#34;dropTarget&#34;: {
</span></span><span style="display:flex;"><span>                &#34;icon&#34;: &#34;Color&#34;,
</span></span><span style="display:flex;"><span>                &#34;description&#34;: &#34;Color by {0}&#34;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        },
</span></span></code></pre></div><ul>
<li>We create hierarchies for <em>X</em> and <em>Color</em> dimensions. These are defined in the manifest and should not be confused with actual color values (css-color from now on to avoid confusion).</li>
<li>We then use this grouped data to extract column names, values, and css-colors.</li>
<li>A Google visualization expects data to be in the following format (and complains if it&rsquo;s not):</li>
</ul>
<table>
  <thead>
      <tr>
          <th>SeriesNames</th>
          <th>Series1</th>
          <th>Style</th>
          <th>Series2</th>
          <th>Style</th>
          <th>Series3</th>
          <th>Style</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Category1</td>
          <td>Value11</td>
          <td>CssColor11</td>
          <td>Value12</td>
          <td>CssColor12</td>
          <td>Value13</td>
          <td>CssColor13</td>
      </tr>
      <tr>
          <td>Category2</td>
          <td>Value21</td>
          <td>CssColor21</td>
          <td>Value22</td>
          <td>CssColor22</td>
          <td>Value23</td>
          <td>CssColor23</td>
      </tr>
  </tbody>
</table>
<ul>
<li>We loop over the X hierarchy to create the data table by filling a row with null values first, and then populating it with existing values at proper positions.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-diff" data-lang="diff"><span style="display:flex;"><span><span style="color:#a40000">-    function drawChart() {
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">-        var data = google.visualization.arrayToDataTable([
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">-            [&#34;Element&#34;, &#34;Density&#34;, { role: &#34;style&#34; }],
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">-            [&#34;Copper&#34;, 8.94, &#34;#b87333&#34;],
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">-            [&#34;Silver&#34;, 10.49, &#34;silver&#34;],
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">-            [&#34;Gold&#34;, 19.3, &#34;gold&#34;],
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">-            [&#34;Platinum&#34;, 21.45, &#34;color: #e5e4e2&#34;]
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">-        ]);
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span>
</span></span><span style="display:flex;"><span><span style="color:#a40000">-        var view = new google.visualization.DataView(data);
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">-        view.setColumns([0, 1, { calc: &#34;stringify&#34;, sourceColumn: 1, type: &#34;string&#34;, role: &#34;annotation&#34; }, 2]);
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span>
</span></span><span style="display:flex;"><span><span style="color:#00a000">+    async function drawChart() {
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+        const colorHierarchy = (await dataView.hierarchy(&#34;Color&#34;))!;
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+        const colorLeafNodes = (await colorHierarchy.root())!.leaves();
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+        const colorDomain = colorHierarchy.isEmpty ? [&#34;All Values&#34;] : colorLeafNodes.map((node) =&gt; node.formattedPath());
</span></span></span><span style="display:flex;"><span><span style="color:#00a000"></span>
</span></span><span style="display:flex;"><span><span style="color:#00a000">+        const xLeafNodes = (await xHierarchy.root())!.leaves();
</span></span></span><span style="display:flex;"><span><span style="color:#00a000"></span>
</span></span><span style="display:flex;"><span><span style="color:#00a000">+        const dataColumns : any[] = [&#34;Columns&#34;];
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+        colorDomain.forEach(value =&gt; dataColumns.push(value, { role: &#34;style&#34; }));
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+        const dataRows : any[][] = [];
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+        xLeafNodes.forEach(
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            (node) =&gt; {
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+               let valueAndColorPairs = new Array(colorLeafNodes.length).fill([0, &#34;&#34;]).flat()
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+               node.rows().forEach((r) =&gt; {
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                   let colorIndex = !colorHierarchy.isEmpty ? r.categorical(&#34;Color&#34;).leafIndex : 0;
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                   let yValue = r.continuous(&#34;Y&#34;).value();
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                   valueAndColorPairs[colorIndex * 2] = yValue;
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                   valueAndColorPairs[colorIndex * 2 + 1] = r.color().hexCode;
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+               });
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+               const dataRow = [node.formattedPath(), valueAndColorPairs].flat();
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+               dataRows.push(dataRow)
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            }
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+        );
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+        var data = google.visualization.arrayToDataTable([dataColumns, ...dataRows]);
</span></span></span><span style="display:flex;"><span><span style="color:#00a000"></span>
</span></span><span style="display:flex;"><span>         var options = {
</span></span><span style="display:flex;"><span>             bar: { groupWidth: &#34;95%&#34; },
</span></span><span style="display:flex;"><span>             legend: { position: &#34;none&#34; },
</span></span><span style="display:flex;"><span>             chartArea: { left: 85, top: 20, right: 10, bottom: 40 }
</span></span><span style="display:flex;"><span>         };
</span></span><span style="display:flex;"><span>         var chart = new google.visualization.BarChart(document.getElementById(&#34;mod-container&#34;));
</span></span><span style="display:flex;"><span><span style="color:#a40000">-        chart.draw(view, options);
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span><span style="color:#00a000">+        chart.draw(data, options);
</span></span></span></code></pre></div><ul>
<li>Notice the <code>possibly null</code> warning regarding the usage of xHierarchy. This is a false negative due to the use of the asynchronous <code>setOnLoadCallback</code>, and we will handle this issue later in this tutorial.</li>
<li>Not all combinations of <em>X</em> and <em>Color</em> domains will be renderable by Google Charts out of the box, without special treatment. We will guard against this with a <code>try</code>/<code>catch</code> block.</li>
<li>The full code of the <code>js-dev-barchart-googlecharts</code> example project goes a little bit more in depth than this tutorial and covers some additional cases.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-diff" data-lang="diff"><span style="display:flex;"><span><span style="color:#a40000">-        var data = google.visualization.arrayToDataTable([dataColumns, ...dataRows]);
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span><span style="color:#00a000">+        let data : google.visualization.DataTable;
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+        try {
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            data = google.visualization.arrayToDataTable([dataColumns, ...dataRows]);
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+        } catch (e: any) {
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            mod.controls.errorOverlay.show(e);
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            return;
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+        }
</span></span></span></code></pre></div><p><img src="/spotfire-mods/docs/visualization-mods/tutorials/barchart-googlechart/images/step3.PNG" alt="Step 3"></p>
<hr>
<h3 id="4-selectionmarking">4. Selection/marking</h3>
<ul>
<li>Add selection/marking logic. We listen for the <code>&quot;select&quot;</code> event and extract <em>X</em> and <em>Color</em> values (not css-color!) by index in their respective domains. The <em>Color</em> index is halved because we have 2 times as many columns due to styling being applied (see table above).</li>
<li>The rows (in this case there will be only one row) to mark will be in the intersection of the set of rows for the marked color and the set of rows for the marked <em>X</em> value. An obvious optimization would be to store the rows as a hash map to eliminate redundancy.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-diff" data-lang="diff"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>         var chart = new google.visualization.BarChart(document.getElementById(&#34;mod-container&#34;));
</span></span><span style="display:flex;"><span>         chart.draw(data, options);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#00a000">+        google.visualization.events.addListener(chart, &#34;select&#34;, () =&gt; {
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            const selection = chart.getSelection()[0];
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            if (!selection) return;
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            const { row, column } = selection;
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            if (column == null || row == null) {
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                return;
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            }
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            const xIndex = row;
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            const colorIndex = (column - 1) / 2;
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            intersection(xLeafNodes[xIndex].rows(), colorLeafNodes[colorIndex].rows()).forEach((r) =&gt; r.mark());
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+       });
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+        function intersection(rows1: Spotfire.DataViewRow[], rows2: Spotfire.DataViewRow[]) {
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            return rows1.filter((r) =&gt; rows2.indexOf(r) &gt; -1);
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+        }
</span></span></span><span style="display:flex;"><span><span style="color:#00a000"></span>     }
</span></span></code></pre></div><p><img src="/spotfire-mods/docs/visualization-mods/tutorials/barchart-googlechart/images/step4.PNG" alt="Step 4"></p>
<ul>
<li>To clear the marking on background click, as native Spotfire visualizations do, we listen for the <code>&quot;click&quot;</code> event and check its target ID. Unfortunately, the Google API is untyped regarding events, hence the <code>any</code> type.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-diff" data-lang="diff"><span style="display:flex;"><span>        function intersection(rows1, rows2) {
</span></span><span style="display:flex;"><span>            return rows1.filter((r) =&gt; rows2.indexOf(r) &gt; -1);
</span></span><span style="display:flex;"><span><span style="color:#00a000">+
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+        google.visualization.events.addListener(chart, &#34;click&#34;, (e: any) =&gt; {
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            if (e.targetID == &#34;chartarea&#34;) {
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                dataView.clearMarking();
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                return;
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            }
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+        });
</span></span></span><span style="display:flex;"><span><span style="color:#00a000"></span>     }
</span></span><span style="display:flex;"><span> });
</span></span></code></pre></div><hr>
<h3 id="5-controlling-the-mod-using-a-popout">5. Controlling the mod using a popout</h3>
<ul>
<li>We would like to control the chart&rsquo;s orientation (<code>horizontal</code>/<code>vertical</code>) and stacking (<code>side-by-side</code>/<code>stacked</code>). The Mods API allows us to do this via a popout menu.</li>
<li>First, we add them as properties to the manifest.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-diff" data-lang="diff"><span style="display:flex;"><span>     &#34;icon&#34;: &#34;icon.svg&#34;,
</span></span><span style="display:flex;"><span>     &#34;properties&#34;: [
</span></span><span style="display:flex;"><span>         {
</span></span><span style="display:flex;"><span><span style="color:#a40000">-            &#34;name&#34;: &#34;myProperty&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span><span style="color:#00a000">+            &#34;name&#34;: &#34;orientation&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#00a000"></span>             &#34;type&#34;: &#34;string&#34;,
</span></span><span style="display:flex;"><span><span style="color:#a40000">-            &#34;defaultValue&#34;: &#34;myValue&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span><span style="color:#00a000">+            &#34;defaultValue&#34;: &#34;vertical&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+        },
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+        {
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            &#34;name&#34;: &#34;stacking&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            &#34;type&#34;: &#34;string&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            &#34;defaultValue&#34;: &#34;side-by-side&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#00a000"></span>         }
</span></span><span style="display:flex;"><span>     ],
</span></span></code></pre></div><ul>
<li>
<p>Then we add the new properties to the <code>read</code> loop and pass them down to the <code>render</code> function.</p>
</li>
<li>
<p>Since the <code>mod-manifest.json</code> file has changed, we will need to reload the manifest.</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-diff" data-lang="diff"><span style="display:flex;"><span>    /**
</span></span><span style="display:flex;"><span>     * Create the read function.
</span></span><span style="display:flex;"><span>     */
</span></span><span style="display:flex;"><span><span style="color:#a40000">-    const reader = mod.createReader(mod.visualization.data(), mod.windowSize(), mod.property(&#34;myProperty&#34;));
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span><span style="color:#00a000">+    const reader = mod.createReader(
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+        mod.visualization.data(),
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+        mod.windowSize(),
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+        mod.property(&#34;orientation&#34;),
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+        mod.property(&#34;stacking&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+    );
</span></span></span><span style="display:flex;"><span><span style="color:#00a000"></span>
</span></span><span style="display:flex;"><span>    /**
</span></span><span style="display:flex;"><span>     * Initiate the read loop
</span></span><span style="display:flex;"><span>     */
</span></span><span style="display:flex;"><span>    reader.subscribe(render);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>     /**
</span></span><span style="display:flex;"><span>      * @param {Spotfire.DataView} dataView
</span></span><span style="display:flex;"><span>      * @param {Spotfire.Size} windowSize
</span></span><span style="display:flex;"><span><span style="color:#a40000">-     * @param {Spotfire.ModProperty&lt;string&gt;} prop
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span><span style="color:#00a000">+     * @param {Spotfire.ModProperty&lt;string&gt;} orientation
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+     * @param {Spotfire.ModProperty&lt;string&gt;} stacking
</span></span></span><span style="display:flex;"><span><span style="color:#00a000"></span>      */
</span></span><span style="display:flex;"><span><span style="color:#a40000">-    async function render(dataView, windowSize, prop) {
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span><span style="color:#00a000">+    async function render(dataView, windowSize, orientation, stacking) {
</span></span></span></code></pre></div><ul>
<li>Update the background click callback to show a test popout.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-diff" data-lang="diff"><span style="display:flex;"><span>         google.visualization.events.addListener(chart, &#34;click&#34;, ({ targetID, x, y }) =&gt; {
</span></span><span style="display:flex;"><span>             if (targetID == &#34;chartarea&#34;) {
</span></span><span style="display:flex;"><span>                 dataView.clearMarking();
</span></span><span style="display:flex;"><span><span style="color:#00a000">+                showPopout({ x, y });
</span></span></span><span style="display:flex;"><span><span style="color:#00a000"></span>                 return;
</span></span><span style="display:flex;"><span>             }
</span></span><span style="display:flex;"><span>         });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#00a000">+        const { popout } = mod.controls;
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+        function showPopout(e) {
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            popout.show(
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                {
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                    x: e.x,
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                    y: e.y,
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                    autoClose: true,
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                    alignment: &#34;Bottom&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                    onChange: popoutChangeHandler
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                },
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                popoutContent
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            );
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+        }
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+        const { section } = popout;
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+        const { button } = popout.components;
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+        const popoutContent = () =&gt; [
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+           section({ heading: &#34;I&#39;m a popout!&#34;, children: [button({ text: &#34;I&#39;m a button&#34;, name: &#34;button&#34; })] })
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+        ];
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+        function popoutChangeHandler() {}
</span></span></span><span style="display:flex;"><span><span style="color:#00a000"></span>     }
</span></span><span style="display:flex;"><span> });
</span></span></code></pre></div><p><img src="/spotfire-mods/docs/visualization-mods/tutorials/barchart-googlechart/images/step5.PNG" alt="Step 5"></p>
<ul>
<li>Add a tiny helper function to check property value.</li>
<li>On each render we check the stacking and orientation properties and update the chart configuration accordingly. Stacking is a simple boolean, but orientation requires different classes for <code>horizontal</code> and <code>vertical</code> types of charts.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-diff" data-lang="diff"><span style="display:flex;"><span><span style="color:#00a000">+        const is = property =&gt; value =&gt; property.value() == value;
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+
</span></span></span><span style="display:flex;"><span><span style="color:#00a000"></span>         var options = {
</span></span><span style="display:flex;"><span>             bar: { groupWidth: &#34;95%&#34; },
</span></span><span style="display:flex;"><span>             legend: { position: &#34;none&#34; },
</span></span><span style="display:flex;"><span><span style="color:#a40000">-            chartArea: { left: 85, top: 20, right: 10, bottom: 40 }
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span><span style="color:#00a000">+            chartArea: { left: 85, top: 20, right: 10, bottom: 40 },
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            isStacked: is(stacking)(&#34;stacked&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#00a000"></span>         };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a40000">-        var chart = new google.visualization.BarChart(document.getElementById(&#34;mod-container&#34;));
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span><span style="color:#00a000">+
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+        const container = document.querySelector(&#34;#mod-container&#34;);
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+        let chart;
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+        if (is(orientation)(&#34;horizontal&#34;)) {
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            chart = new google.visualization.BarChart(container);
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+        } else {
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            chart = new google.visualization.ColumnChart(container);
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+        }
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+
</span></span></span><span style="display:flex;"><span><span style="color:#00a000"></span>         chart.draw(data, options);
</span></span></code></pre></div><ul>
<li>To mimic native Spotfire bar chart behavior, we show a popout on X-axis click (Y-axis for horizontal orientation).</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-diff" data-lang="diff"><span style="display:flex;"><span>         google.visualization.events.addListener(chart, &#34;click&#34;, ({ targetID, x, y }) =&gt; {
</span></span><span style="display:flex;"><span>             if (targetID == &#34;chartarea&#34;) {
</span></span><span style="display:flex;"><span>                 dataView.clearMarking();
</span></span><span style="display:flex;"><span><span style="color:#a40000">-                showPopout({ x, y });
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span>                 return;
</span></span><span style="display:flex;"><span>             }
</span></span><span style="display:flex;"><span><span style="color:#00a000">+
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            if (is(orientation)(&#34;vertical&#34;) &amp;&amp; targetID.indexOf(&#34;hAxis&#34;) != -1) {
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                showPopout({ x, y });
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                return;
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            }
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            if (is(orientation)(&#34;horizontal&#34;) &amp;&amp; targetID.indexOf(&#34;vAxis&#34;) != -1) {
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                showPopout({ x, y });
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                return;
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            }
</span></span></span><span style="display:flex;"><span><span style="color:#00a000"></span>         });
</span></span></code></pre></div><ul>
<li>Create popout content from the available components.</li>
<li>Listen for popout changes and update property values. This will trigger a re-render and add a step to the native <em>Undo stack</em>.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-diff" data-lang="diff"><span style="display:flex;"><span>         const { section } = popout;
</span></span><span style="display:flex;"><span><span style="color:#a40000">-        const { button } = popout.components;
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">-        const popoutContent = () =&gt; [
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">-           section({ heading: &#34;I&#39;m a popout!&#34;, children: [button({ text: &#34;I&#39;m a button&#34;, name: &#34;button&#34; })] })
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">-        ];
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span>
</span></span><span style="display:flex;"><span><span style="color:#00a000">+        const { radioButton } = popout.components;
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+        const popoutContent = () =&gt; [
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            section({
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                heading: &#34;Chart Type&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                children: [
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                    radioButton({
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                        name: stacking.name,
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                        text: &#34;Stacked bars&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                        value: &#34;stacked&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                        checked: is(stacking)(&#34;stacked&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                    }),
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                    radioButton({
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                        name: stacking.name,
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                        text: &#34;Side-by-side bars&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                        value: &#34;side-by-side&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                        checked: is(stacking)(&#34;side-by-side&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                    })
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                ]
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            }),
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            section({
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                heading: &#34;Orientation&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                children: [
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                    radioButton({
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                        name: orientation.name,
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                        text: &#34;Vertical&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                        value: &#34;vertical&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                        checked: is(orientation)(&#34;vertical&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                    }),
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                    radioButton({
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                        name: orientation.name,
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                        text: &#34;Horizontal&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                        value: &#34;horizontal&#34;,
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                        checked: is(orientation)(&#34;horizontal&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                    })
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                ]
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            })
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+        ];
</span></span></span><span style="display:flex;"><span><span style="color:#00a000"></span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a40000">-        function popoutChangeHandler() {}
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span><span style="color:#00a000">+        function popoutChangeHandler({ name, value }) {
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            name == orientation.name &amp;&amp; orientation.set(value);
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            name == stacking.name &amp;&amp; stacking.set(value);
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+        }
</span></span></span></code></pre></div><ul>
<li>Lastly, add a pointer cursor to <code>svg text</code> rule in <code>main.css</code> to signal an interactive element.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-diff" data-lang="diff"><span style="display:flex;"><span>html, body, #mod-container {
</span></span><span style="display:flex;"><span>     margin: 0;
</span></span><span style="display:flex;"><span>     height: 100%;
</span></span><span style="display:flex;"><span>     overflow: hidden;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#00a000">+
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+svg text {
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+    cursor: pointer;
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+}
</span></span></span></code></pre></div><p><img src="/spotfire-mods/docs/visualization-mods/tutorials/barchart-googlechart/images/step5-1.PNG" alt="Step 5-1"></p>
<hr>
<h3 id="6-use-spotfire-theme-and-styling">6. Use Spotfire theme and styling</h3>
<ul>
<li>Extract style info from <code>context</code>.</li>
<li>Update the <code>options</code> object.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-diff" data-lang="diff"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#00a000">+        const context = mod.getRenderContext();
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+        const styling = context.styling;
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+        const textStyle = {
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            fontSize: styling.scales.font.fontSize,
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            fontName: styling.scales.font.fontFamily,
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            color: styling.scales.font.color
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+        };
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+        const baselineColor = styling.scales.line.stroke;
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+        const gridlines = { color: &#34;transparent&#34; };
</span></span></span><span style="display:flex;"><span><span style="color:#00a000"></span>
</span></span><span style="display:flex;"><span><span style="color:#a40000">-        var options = {
</span></span></span><span style="display:flex;"><span><span style="color:#a40000">-            bar: { groupWidth: &#34;95%&#34; },
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span><span style="color:#00a000">+        const options = {
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            bar: { groupWidth: &#34;80%&#34; },
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            backgroundColor: { fill: &#34;transparent&#34; },
</span></span></span><span style="display:flex;"><span><span style="color:#00a000"></span>             legend: { position: &#34;none&#34; },
</span></span><span style="display:flex;"><span>             chartArea: { left: 85, top: 20, right: 10, bottom: 40 },
</span></span><span style="display:flex;"><span><span style="color:#a40000">-            isStacked: is(stacking)(&#34;stacked&#34;)
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span><span style="color:#00a000">+            isStacked: is(stacking)(&#34;stacked&#34;),
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            hAxis: {
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                textStyle,
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                baselineColor,
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                gridlines
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            },
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            vAxis: {
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                textStyle,
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                baselineColor,
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                gridlines,
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+                minValue: 0
</span></span></span><span style="display:flex;"><span><span style="color:#00a000">+            }
</span></span></span><span style="display:flex;"><span><span style="color:#00a000"></span>         };
</span></span></code></pre></div><ul>
<li>In Spotfire, change canvas styling to <em>Dark</em> (<em>Visualizations &gt; Canvas styling &gt; Dark</em>). You should see the colors change according to the theme.</li>
</ul>
<p><img src="/spotfire-mods/docs/visualization-mods/tutorials/barchart-googlechart/images/step6.PNG" alt="Step 6"></p>
<hr>
<h3 id="7-prepare-for-export">7. Prepare for export</h3>
<ul>
<li>For export to work, we need to let Spotfire know when rendering is complete.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-diff" data-lang="diff"><span style="display:flex;"><span>        function popoutChangeHandler({ name, value }) {
</span></span><span style="display:flex;"><span>            name == orientation.name &amp;&amp; orientation.set(value);
</span></span><span style="display:flex;"><span>            name == stacking.name &amp;&amp; stacking.set(value);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#00a000">+       google.visualization.events.addListener(chart, &#34;ready&#34;, () =&gt; context.signalRenderComplete());
</span></span></span></code></pre></div><ul>
<li>Go to <em>File &gt; Export &gt; Visualization to PDF</em> to test the export feature.</li>
</ul>
<p><img src="/spotfire-mods/docs/visualization-mods/tutorials/barchart-googlechart/images/step7.PNG" alt="Step 7"></p>
<ul>
<li>Note that this example mod is using external resources, hence it will not be possible to export using the web client, see the <a href="/spotfire-mods/docs/visualization-mods/using-the-api/mod-schema/">manifest schema documentation</a>.</li>
</ul>

	
	
	<div class="text-muted mt-5 pt-3 border-top">Last modified June 14, 2024
</div>
</div>


          </main>
        </div>
      </div>
      
<footer class="bg-dark py-4 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Open the official Spotfire page on X" aria-label="Open the official Spotfire page on X">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://x.com/spotfire">
      <i class="fab fa-x-twitter"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Open the official Spotfire page on LinkedIn" aria-label="Open the official Spotfire page on LinkedIn">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/company/spotfire/">
      <i class="fab fa-linkedin"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Open the Dr. Spotfire YouTube channel" aria-label="Open the Dr. Spotfire YouTube channel">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://www.youtube.com/@drspotfire">
      <i class="fab fa-youtube"></i>
    </a>
  </li>
  
</ul>

        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Open the Facebook group for Spotfire users, partners, and practitioners" aria-label="Open the Facebook group for Spotfire users, partners, and practitioners">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://www.facebook.com/groups/651751391967838">
      <i class="fab fa-facebook"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Open the Spotfire user group on LinkedIn" aria-label="Open the Spotfire user group on LinkedIn">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/groups/12253057/">
      <i class="fab fa-linkedin"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://github.com/spotfiresoftware/spotfire-mods">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Spotfire Community" aria-label="Spotfire Community">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://spotfi.re/community/mods-overview">
      <i class="fa fa-comment-alt"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2025 Cloud Software Group All Rights Reserved</small>
        <small class="ml-1"><a href="https://www.cloud.com/privacy-policy" target="_blank">Privacy Policy</a></small>
	
		<p class="mt-2"><a href="/spotfire-mods/about/">About Spotfire Mods</a></p>
	
      </div>
    </div>
  </div>
</footer>


    </div>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>











<script src="/spotfire-mods/js/main.min.2e372965989862d7e055760988f44f8141d8237a114d3737f4f38d503db9494b.js" data-integrity="sha256-LjcpZZiYYtfgVXYJiPRPgUHYI3oRTTc39PONUD25SUs=" crossorigin="anonymous"></script>




  </body>
</html>