<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.152.2"><META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">


<link rel="shortcut icon"  href="/spotfire-mods/favicons/favicon.ico" >


<title>Working with mod readers | Spotfire® Mods</title>
  <meta itemprop="name" content="Working with mod readers">
  <meta itemprop="description" content="This document gives an introduction to the mod [reader](/spotfire-mods/api-docs/visualization-mods/interfaces/Reader.html).">
  <meta itemprop="datePublished" content="2024-06-14T00:00:00+00:00">
  <meta itemprop="dateModified" content="2024-06-14T00:00:00+00:00">
  <meta itemprop="wordCount" content="1372">



<link rel="preload" href="/spotfire-mods/scss/main.min.611dbb678289efd7ec655cc8ba608a9038169188984397cb722317f450975b34.css" as="style">
<link href="/spotfire-mods/scss/main.min.611dbb678289efd7ec655cc8ba608a9038169188984397cb722317f450975b34.css" rel="stylesheet" integrity="">


<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>




    <title>Working with mod readers | Spotfire® Mods</title>
  </head>
  <body class="td-page">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="/spotfire-mods/">
		<span class="navbar-logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 232 40"><path d="M160.46 29.9V10.8h1.8V30h-1.8v-.1zm8.7-5.8-8.3-12.4.6-.5.7-.5 7.9 11.6-.9 1.8zm0 0-.8-1.8 7.8-11.6.7.5.6.5-8.3 12.4zm7.1 5.8V10.8h1.8V30h-1.8v-.1zm12.4.3c-1.3.0-2.5-.3-3.5-.9s-1.8-1.5-2.4-2.5c-.6-1.1-.9-2.3-.9-3.7s.3-2.6.8-3.7c.6-1.1 1.4-1.9 2.4-2.5s2.2-.9 3.5-.9 2.5.3 3.5.9 1.8 1.5 2.4 2.5c.6 1.1.8 2.3.8 3.7s-.3 2.6-.8 3.7-1.3 1.9-2.4 2.5c-.9.6-2.1.9-3.4.9zm0-1.5c1 0 1.9-.2 2.6-.7s1.3-1.1 1.8-2 .6-1.8.6-2.9-.2-2.1-.6-2.9c-.4-.8-1-1.5-1.8-2s-1.6-.7-2.6-.7-1.9.2-2.6.7c-.8.5-1.4 1.1-1.8 2-.4.8-.6 1.8-.6 2.9s.2 2.1.7 2.9c.4.8 1 1.5 1.8 2s1.5.7 2.5.7zm15.3 1.5c-1.2.0-2.3-.3-3.2-.9s-1.7-1.5-2.2-2.5c-.5-1.1-.8-2.3-.8-3.7s.3-2.6.8-3.7 1.3-1.9 2.2-2.5 2-.9 3.2-.9 2.2.3 3.1.9c.9.6 1.6 1.5 2.1 2.5.5 1.1.8 2.3.8 3.7s-.3 2.6-.8 3.7-1.2 1.9-2.1 2.5-1.9.9-3.1.9zm.3-1.4c.9.0 1.7-.2 2.3-.7.7-.5 1.2-1.2 1.6-2 .4-.9.6-1.8.6-3 0-1.1-.2-2.1-.6-3s-.9-1.5-1.6-2-1.5-.7-2.4-.7-1.8.2-2.5.7-1.3 1.2-1.7 2c-.4.9-.6 1.8-.6 3 0 1.1.2 2.1.6 3s1 1.5 1.7 2 1.7.7 2.6.7zm4.6 1.1-.1-2.5V10.8h1.6V30h-1.5v-.1zm10.3.3c-1 0-1.9-.2-2.7-.5-.7-.3-1.4-.7-1.8-1.2-.5-.5-.8-1-1-1.5l1.5-.5c.3.7.8 1.2 1.5 1.6s1.4.6 2.2.6c1 0 1.8-.2 2.5-.6s1-1 1-1.7-.2-1.2-.7-1.6-1.2-.8-2.2-1l-1.3-.4c-1.2-.3-2.2-.8-2.8-1.4s-1-1.3-1-2.1c0-1.3.4-2.2 1.2-2.9s2.1-1.1 3.8-1.1c.8.0 1.5.1 2.1.3s1.2.6 1.6 1 .8.9 1 1.5l-1.5.6c-.3-.7-.7-1.2-1.3-1.5s-1.3-.4-2.2-.4c-1 0-1.7.2-2.3.6s-.8 1-.8 1.7c0 .4.2.8.7 1.2s1.1.7 2 .9l1.2.3c.9.2 1.7.5 2.3.9s1.1.9 1.5 1.4.5 1.1.5 1.8c0 .8-.2 1.5-.6 2.1s-1 1-1.7 1.4c-.9.4-1.8.5-2.7.5zM117.392 29.942h2.709a.222.222.0 00.225-.219v-13.93a.222.222.0 00-.225-.219h-2.634a.222.222.0 00-.225.219v14.003c0 .081.067.146.15.146zm7.989-12.57v-1.578a.222.222.0 00-.225-.219h-2.634a.222.222.0 00-.225.219v13.93c0 .121.101.219.225.219h2.634a.222.222.0 00.225-.219v-7.329c0-1.476.311-2.513.933-3.111.622-.597 1.537-.896 2.746-.896h.559a.222.222.0 00.225-.219v-2.667a.224.224.0 00-.231-.221c-.93.029-1.742.234-2.433.616a4.772 4.772.0 00-1.662 1.514c-.041.061-.137.035-.137-.038zM87.727 18.219c2.815.0 5.046 2.484 4.507 5.32-.338 1.781-1.807 3.212-3.635 3.542-2.911.525-5.459-1.649-5.459-4.392.0-2.465 2.058-4.471 4.587-4.471m0-2.98c-4.509.0-8.107 3.804-7.598 8.299.387 3.417 3.221 6.179 6.727 6.556 4.613.497 8.516-3.01 8.516-7.404.0-4.115-3.423-7.451-7.646-7.451zm27.987-3.792V8.991a.227.227.0 00-.215-.221c-2.029-.089-4.069.347-5.129 1.308-1.097.995-1.646 2.45-1.646 4.365v1.131h-2.415a.222.222.0 00-.225.219v2.374c0 .121.101.219.225.219h2.407v11.336c0 .121.101.219.225.219h2.661a.222.222.0 00.225-.219V18.386h3.65a.222.222.0 00.225-.219v-2.374a.222.222.0 00-.225-.219h-3.662v-1.131c0-1.971 1.549-2.897 3.657-2.779a.224.224.0 00.242-.218z" fill="#333c66"/><ellipse cx="118.793" cy="10.634" rx="1.885" ry="1.837" fill="#333c66"/><path d="M78.029 18.508a6.836 6.836.0 00-2.74-2.531 7.943 7.943.0 00-3.646-.864 7.76 7.76.0 00-1.596.167 7.77 7.77.0 00-2.006.717 6.893 6.893.0 00-1.024.652c-.049.038-.12.005-.12-.056v-1.007a.223.223.0 00-.225-.22h-2.634a.222.222.0 00-.225.22v19.815c0 .121.101.219.225.219h2.639a.219.219.0 00.221-.216v-7.558c0-.068.084-.098.13-.047.539.602 1.217 1.11 2.034 1.524.889.451 1.906.675 3.051.672l.149-.006a7.614 7.614.0 003.028-.878c1.134-.603 2.048-1.479 2.74-2.631.692-1.151 1.039-2.491 1.039-4.017s-.347-2.845-1.039-3.957zm-6.365 8.44c-2.453.0-4.442-2.002-4.442-4.471s1.989-4.471 4.442-4.471 4.442 2.002 4.442 4.471-1.989 4.471-4.442 4.471zM60.825 20.631c-.806-.926-1.985-1.661-3.603-2.246l-2.111-.771c-2.111-.761-3.183-1.424-3.183-2.938.0-1.555 1.665-2.368 3.31-2.368.952.0 1.806.232 2.585.705.68.413 1.541.409 2.2-.036l1.154-.779c.261-.176.28-.328.191-.425-1.525-1.651-3.68-2.557-6.1-2.557-1.904.0-3.616.541-4.821 1.523-1.26 1.027-1.926 2.467-1.926 4.166.0 2.698 1.56 4.506 4.908 5.69l2.287.8c2.06.738 2.978 1.697 2.978 3.11.0 1.495-1.397 2.54-3.398 2.54-1.394.0-2.66-.453-3.68-1.298-.696-.577-1.691-.651-2.442-.144l-.981.662c-.286.193-.326.367-.241.497 1.37 2.089 4.106 3.375 7.227 3.375 2.008.0 3.732-.551 4.985-1.594 1.267-1.054 1.937-2.52 1.937-4.238.014-1.469-.403-2.67-1.276-3.673zm43.86-2.244a.222.222.0 00.225-.22v-2.368a.222.222.0 00-.225-.219h-3.661v-3.697a.217.217.0 00-.219-.216h-2.669a.218.218.0 00-.221.215v3.697h-2.408a.222.222.0 00-.225.22v2.368c0 .121.101.219.225.219h2.408v7.501c0 1.429.369 2.461 1.109 3.096.739.635 1.803.953 3.192.953h2.474a.222.222.0 00.225-.22v-2.074a.223.223.0 00-.225-.22h-1.933c-.631.0-1.078-.119-1.339-.357-.262-.238-.392-.63-.392-1.178v-7.501h3.66zm33.042 8.952c-1.203.0-2.219-.288-3.053-.864-.834-.577-1.367-1.661-1.598-2.738h11.374a.227.227.0 00.224-.194c.059-.44.089-.8.089-1.081.0-1.555-.355-2.495-1.149-3.882-.238-.416-.557-.791-.901-1.158-1.367-1.453-3.116-2.182-5.248-2.182-2.249.0-4.089.714-5.523 2.139-1.434 1.428-2.152 3.198-2.152 5.313.0 2.153.727 3.935 2.181 5.341 1.453 1.408 3.362 2.11 5.727 2.11 2.487.0 4.432-.811 5.841-2.424a.218.218.0 00-.022-.306l-.689-.609c-.668-.59-1.667-.679-2.413-.186-.725.48-1.621.72-2.688.72zm-3.198-8.386c.775-.624 1.745-.935 2.907-.935 1.027.0 1.924.293 2.69.878.75.574 1.234 1.164 1.453 2.282.004.023.01.044.015.067h-8.547c.212-1.077.708-1.669 1.483-2.292zM33.715 19.52l-.019-.222-.034-.472-.058-.454a5.052 5.052.0 00-.07-.451l-.084-.466-.06-.262c-.047-.208-.095-.424-.157-.627a13.622 13.622.0 00-.618-1.751 14.48 14.48.0 00-.849-1.643A13.563 13.563.0 0028.01 9.145c-.174-.131-.349-.242-.534-.36-.081-.052-.162-.103-.242-.156-.08-.044-.17-.097-.261-.15-.182-.106-.353-.207-.534-.295a13.4 13.4.0 00-1.696-.741 14.16 14.16.0 00-1.775-.498l-.454-.083a5.386 5.386.0 00-.449-.071l-.466-.06-.458-.033-.234-.019-.225-.005-.461-.011-.462.011-.236.006-.221.019-.47.035-.452.058c-.146.016-.296.04-.449.07l-.464.085a13.371 13.371.0 00-3.998 1.534c-.091.053-.181.106-.273.158l-.23.149c-.185.118-.36.229-.529.356A13.571 13.571.0 008.673 13.18a14.566 14.566.0 00-.847 1.639 13.627 13.627.0 00-.616 1.743c-.064.21-.112.425-.159.633l-.062.273-.082.452a5.08 5.08.0 00-.07.451l-.059.468-.033.46-.019.235-.005.226-.011.47.011.461.006.235.019.224.034.47.058.456c.016.146.039.293.07.451l.084.463c.019.078.039.166.058.254a13.622 13.622.0 00.777 2.386c.209.49.479 1.012.849 1.643a13.614 13.614.0 004.282 4.382l.251.161c.08.044.17.098.261.151.181.107.352.208.533.294.482.259 1.018.493 1.696.741.371.134.723.245 1.07.338v-1.723a3.634 3.634.0 00-1.434-2.656l-.014-.01a566.35 566.35.0 01-.386-.291l-.31-.233-.065-.049-.052-.037a9.907 9.907.0 01-1.973-1.847 11.055 11.055.0 01-.782-1.107c-.255-.44-.456-.811-.622-1.207a9.62 9.62.0 01-.449-1.274 4.03 4.03.0 01-.105-.41 6.596 6.596.0 00-.055-.234l-.06-.342a3.302 3.302.0 01-.053-.342l-.043-.323-.024-.347-.013-.164-.004-.179-.009-.333.009-.347.004-.167.014-.178.023-.33.045-.343a3.08 3.08.0 01.054-.343l.056-.32c.023-.093.041-.171.058-.249.031-.138.063-.281.109-.422.115-.445.29-.889.445-1.262.179-.426.403-.829.619-1.201.28-.443.528-.795.785-1.112a9.96 9.96.0 011.981-1.853c.11-.086.235-.164.355-.241.067-.043.134-.085.2-.13l.008-.006.009-.005c.073-.039.144-.081.215-.123.119-.07.243-.143.374-.205a9.694 9.694.0 011.227-.536c.366-.134.765-.247 1.296-.367l.335-.059c.111-.023.225-.041.342-.054l.324-.043.344-.024.163-.013.179-.004.332-.009.344.009.166.004.177.014.329.023.342.045a3.1 3.1.0 01.342.054l.319.056c.54.122.939.235 1.304.368.35.129.806.307 1.238.541.121.056.245.129.364.199.071.042.143.084.215.123l.009.005.008.006c.065.045.133.087.2.13.12.076.245.155.363.246a9.895 9.895.0 011.972 1.846c.258.319.506.67.782 1.107.219.379.443.782.622 1.207.156.374.331.817.449 1.274.043.129.074.272.105.409.017.078.035.157.055.234l.06.342c.023.11.041.224.053.342l.043.325.024.345.013.164.004.179.009.335-.009.345-.004.167-.014.177-.023.332-.045.341a3.08 3.08.0 01-.054.343l-.056.32a8.908 8.908.0 00-.058.249c-.031.138-.063.28-.108.421a9.376 9.376.0 01-.445 1.262c-.166.397-.368.767-.619 1.201-.275.437-.53.799-.785 1.113a9.956 9.956.0 01-2.037 1.891l-.054.042-.31.233-.383.288-.021.015a3.636 3.636.0 00-1.43 2.665v1.712a13.17 13.17.0 001.07-.338 12.77 12.77.0 001.687-.737 7.13 7.13.0 00.541-.299c.091-.053.181-.107.273-.158.071-.047.154-.101.238-.154a13.634 13.634.0 004.284-4.387c.367-.626.637-1.148.847-1.639a13.627 13.627.0 00.777-2.384l.06-.264.082-.45c.032-.161.055-.308.07-.451l.059-.469.033-.458.019-.237.005-.224.011-.47-.011-.461-.006-.237z" fill="#333c66"/><ellipse cx="20.22" cy="20" rx="5.227" ry="5.17" fill="#e94165"/><path d="M20.22 3.65c4.428.0 8.589 1.704 11.717 4.798 3.121 3.087 4.84 7.19 4.84 11.552s-1.719 8.465-4.84 11.552c-3.128 3.094-7.289 4.798-11.717 4.798s-8.589-1.704-11.717-4.798c-3.121-3.087-4.84-7.19-4.84-11.552s1.719-8.465 4.84-11.552C11.631 5.354 15.792 3.65 20.22 3.65m0-3.65C9.053.0.0 8.954.0 20s9.053 20 20.22 20 20.22-8.954 20.22-20S31.387.0 20.22.0zM145.845 15.333a1.917 1.917.0 01-1.917-1.917 1.894 1.894.0 01.561-1.362 1.933 1.933.0 012.108-.412 1.921 1.921.0 011.022 1.022c.1.231.149.483.149.752a1.906 1.906.0 01-.561 1.356 1.897 1.897.0 01-1.362.561zm0-.397c.298.0.561-.064.788-.192s.405-.306.532-.536c.128-.229.192-.493.192-.791.0-.303-.064-.568-.192-.795a1.398 1.398.0 00-.532-.536 1.558 1.558.0 00-.788-.195c-.293.0-.554.065-.781.195s-.405.309-.532.536-.192.492-.192.795c0 .298.064.562.192.791.128.229.305.408.532.536s.487.192.781.192zm-.717-.511v-2.072h.745c.213.0.388.06.525.181s.206.28.206.479a.605.605.0 01-.11.355.671.671.0 01-.295.234l.49.823h-.419l-.426-.752h-.348v.752h-.369zm.369-1.093h.39a.333.333.0 00.238-.089.3.3.0 00.096-.231.304.304.0 00-.099-.238.38.38.0 00-.262-.089h-.362v.646z" fill="#333c66"/></svg></span><span class="text-uppercase font-weight-bold"></span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				<a class="nav-link" 
				href="/spotfire-mods/about/" 
				>
				<span>About</span></a>
				
				
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				<a class="nav-link active" 
				href="/spotfire-mods/docs/" 
				>
				<span class="active">Working with mods</span></a>
				
				
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				<span class="nav-link active hasChildren">
					<span  class="active">API documentation</span>
				</span>
				
				
				<ul class="navbar-subnav top">
					
					<li class="nav-item">
						<span class="active">Action mods</span>

						
						
						<ul class="navbar-subnav">
							
							<li class="nav-item">
								<a class="nav-link active" 
								href="/spotfire-mods/api-docs/action-mods/index.html" 
								>
								<span class="active">API documentation</span></a>
									</li>
							
						</ul>
						
		

					</li>
					
					<li class="nav-item">
						<span class="active">Visualization mods</span>

						
						
						<ul class="navbar-subnav">
							
							<li class="nav-item">
								<a class="nav-link active" 
								href="/spotfire-mods/overview/" 
								>
								<span class="active">API Overview</span></a>
									</li>
							
							<li class="nav-item">
								<a class="nav-link active" 
								href="/spotfire-mods/api-docs/visualization-mods/index.html" 
								>
								<span class="active">API documentation</span></a>
									</li>
							
						</ul>
						
		

					</li>
					
				</ul>
				
			</li>
			
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block">
</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            




<div id="td-sidebar-menu" class="td-sidebar__inner">
  
  <form class="td-sidebar__search d-flex align-items-center d-lg-none">
    

    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  
  <nav class="collapse td-sidebar-nav" id="td-section-nav">
    
    
    






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/spotfire-mods/docs/" class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Working with mods</a>
  </li>
  <ul>
    <li class="collapse show" id="spotfire-modsdocs">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-spotfire-modsdocsgetting-started" href="/spotfire-mods/docs/getting-started/">Getting started</a>
        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/spotfire-mods/docs/whats-new/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">What&#39;s new?</a>
  </li>
  <ul>
    <li class="collapse " id="spotfire-modsdocswhats-new">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/spotfire-mods/docs/action-mods/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Action mods</a>
  </li>
  <ul>
    <li class="collapse " id="spotfire-modsdocsaction-mods">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-spotfire-modsdocsaction-modsdeveloping-action-mods" href="/spotfire-mods/docs/action-mods/developing-action-mods/">Developing action mods</a>
        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/spotfire-mods/docs/action-mods/tutorial/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Tutorial</a>
  </li>
  <ul>
    <li class="collapse " id="spotfire-modsdocsaction-modstutorial">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/spotfire-mods/docs/action-mods/snippets/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Snippets</a>
  </li>
  <ul>
    <li class="collapse " id="spotfire-modsdocsaction-modssnippets">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/spotfire-mods/docs/action-mods/using-the-api/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Using the API</a>
  </li>
  <ul>
    <li class="collapse " id="spotfire-modsdocsaction-modsusing-the-api">
      
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/spotfire-mods/docs/action-mods/using-the-api/parameter-types/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Parameter types</a>
  </li>
  <ul>
    <li class="collapse " id="spotfire-modsdocsaction-modsusing-the-apiparameter-types">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-spotfire-modsdocsaction-modsusing-the-apiapi-docs" href="/spotfire-mods/docs/action-mods/using-the-api/api-docs/">Action mods API documentation</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-spotfire-modsdocsaction-modsusing-the-apimod-schema" href="/spotfire-mods/docs/action-mods/using-the-api/mod-schema/">Mod schema</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/spotfire-mods/docs/action-mods/faq/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">FAQ</a>
  </li>
  <ul>
    <li class="collapse " id="spotfire-modsdocsaction-modsfaq">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/spotfire-mods/docs/visualization-mods/" class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Visualization mods</a>
  </li>
  <ul>
    <li class="collapse show" id="spotfire-modsdocsvisualization-mods">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-spotfire-modsdocsvisualization-modsdeveloping-visualization-mods" href="/spotfire-mods/docs/visualization-mods/developing-visualization-mods/">Developing visualization mods</a>
        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/spotfire-mods/docs/visualization-mods/tutorials/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Tutorials</a>
  </li>
  <ul>
    <li class="collapse " id="spotfire-modsdocsvisualization-modstutorials">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-spotfire-modsdocsvisualization-modstutorialsbarchart-googlechart" href="/spotfire-mods/docs/visualization-mods/tutorials/barchart-googlechart/">Create a bar chart using Google Charts</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-spotfire-modsdocsvisualization-modstutorialsmod-icons" href="/spotfire-mods/docs/visualization-mods/tutorials/mod-icons/">Create an icon for your visualization mod</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/spotfire-mods/docs/visualization-mods/using-the-api/" class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Using the API</a>
  </li>
  <ul>
    <li class="collapse show" id="spotfire-modsdocsvisualization-modsusing-the-api">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-spotfire-modsdocsvisualization-modsusing-the-apiapi-overview" href="/spotfire-mods/docs/visualization-mods/using-the-api/api-overview/">API overview</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-spotfire-modsdocsvisualization-modsusing-the-apiapi-docs" href="/spotfire-mods/docs/visualization-mods/using-the-api/api-docs/">Visualization mods API documentation</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-spotfire-modsdocsvisualization-modsusing-the-apimod-data-views" href="/spotfire-mods/docs/visualization-mods/using-the-api/mod-data-views/">Mod data views</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-spotfire-modsdocsvisualization-modsusing-the-apimod-schema" href="/spotfire-mods/docs/visualization-mods/using-the-api/mod-schema/">Mod schema</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page  active" id="m-spotfire-modsdocsvisualization-modsusing-the-apiworking-with-readables" href="/spotfire-mods/docs/visualization-mods/using-the-api/working-with-readables/">Mod reader</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/spotfire-mods/docs/visualization-mods/faq/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">FAQ</a>
  </li>
  <ul>
    <li class="collapse " id="spotfire-modsdocsvisualization-modsfaq">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-spotfire-modsdocsvisualization-modsgetting-started-11" href="/spotfire-mods/docs/visualization-mods/getting-started-11/">Getting started (before 14.4)</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
    </li>
  </ul>
</ul>

  </nav>
</div>




          </div>
          <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
            






<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">












<a href="https://github.com/spotfiresoftware/spotfire-mods/issues/new?title=Working%20with%20mod%20readers" target="_blank"><i class="fab fa-github fa-fw"></i> Create documentation issue</a>


<a href="https://github.com/spotfiresoftware/spotfire-mods/issues/new" target="_blank"><i class="fas fa-tasks fa-fw"></i> Create project issue</a>





</div>






<nav id="TableOfContents">
  <ul>
    <li><a href="#introduction">Introduction</a>
      <ul>
        <li><a href="#methods">Methods</a></li>
        <li><a href="#guidance-on-how-to-use-readers">Guidance on how to use readers</a></li>
      </ul>
    </li>
    <li><a href="#separating-initial-setup-from-updates">Separating initial setup from updates</a></li>
    <li><a href="#knowing-what-changed">Knowing what changed</a></li>
    <li><a href="#readables">Readables</a>
      <ul>
        <li><a href="#readableproxy">ReadableProxy</a></li>
      </ul>
    </li>
    <li><a href="#full-examples">Full examples</a></li>
  </ul>
</nav>



          </div>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
	<ol class="breadcrumb spb-1">
		













<li class="breadcrumb-item" >
	<a href="/spotfire-mods/docs/">Working with mods</a>
</li>




<li class="breadcrumb-item" >
	<a href="/spotfire-mods/docs/visualization-mods/">Visualization mods</a>
</li>




<li class="breadcrumb-item" >
	<a href="/spotfire-mods/docs/visualization-mods/using-the-api/">Using the API</a>
</li>




<li class="breadcrumb-item active" aria-current="page">
	<a href="/spotfire-mods/docs/visualization-mods/using-the-api/working-with-readables/">Mod reader</a>
</li>

	</ol>
</nav	>

            



<p class="-text-primary pt-3 h6" >Reading time: 6 minutes and 45 seconds.</p>
<p>
<div class="td-content">
	<h1>Working with mod readers</h1>
    <div class="lead">This document gives an introduction to the mod <a href="/spotfire-mods/api-docs/visualization-mods/interfaces/Reader.html">reader</a>.</div>
	       
	<p>The Spotfire Mod API exposes a set of <a href="/spotfire-mods/overview/#Readable">Readables</a>, such as the <a href="/spotfire-mods/api-docs/visualization-mods/interfaces/DataView.html"><code>DataView</code></a> and <a href="/spotfire-mods/api-docs/visualization-mods/interfaces/AnalysisProperty.html"><code>properties</code></a>. These can be consumed by a <a href="/spotfire-mods/api-docs/visualization-mods/interfaces/Reader.html">Reader</a> in order to read their values and subscribe to changes.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#000">mod</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">createReader</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">mod</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">property</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;myProperty&#34;</span><span style="color:#000;font-weight:bold">),</span> <span style="color:#000">mod</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">windowSize</span><span style="color:#000;font-weight:bold">());</span>
</span></span></code></pre></div><h2 id="introduction">Introduction</h2>
<!-- managing state, the callback will always be invoked with the latest up to date state. -->
<p>The aim of a <code>reader</code> is to simplify the synchronization of reading related values. An example is a visualization that depends on the window&rsquo;s <code>size</code> and the <code>dataview</code>. When one of the two changes, the visualization needs to be redrawn. The <code>reader</code> fetches new values and keeps unchanged values in memory.</p>
<p>The API exposes readables for the <a href="/spotfire-mods/api-docs/visualization-mods/interfaces/DataView.html">Data</a>, <a href="/spotfire-mods/api-docs/visualization-mods/interfaces/ModProperty.html">Properties</a>, <a href="/spotfire-mods/api-docs/visualization-mods/interfaces/AnalysisProperty.html">Document Properties</a>, <a href="/spotfire-mods/api-docs/visualization-mods/interfaces/Page.html">Pages</a>, <a href="/spotfire-mods/api-docs/visualization-mods/interfaces/Size.html">Window size</a>, <a href="/spotfire-mods/api-docs/visualization-mods/interfaces/Axis.html">Axes</a>, <a href="/spotfire-mods/api-docs/visualization-mods/interfaces/DataTable.html">Tables</a> and <a href="/spotfire-mods/api-docs/visualization-mods/interfaces/Column.html">Columns</a>.</p>
<h3 id="methods">Methods</h3>
<p>A <code>reader</code> has three methods; <code>subscribe</code>, <code>once</code> and <code>hasExpired</code>.</p>
<h4 id="subscribecallback"><code>subscribe(callback)</code></h4>
<p>Subscribe will be the most common way to work with <code>readables</code>. It sets up a subscription to new changes of the <code>readables</code> provided to the <code>reader</code>. When one or more <code>readables</code> gets updated on the server, the <code>reader</code> fetch all new values and invoke the provided <code>callback</code> with updated values.</p>
<p>The <code>reader</code> will only allow one <code>subscribe</code> <code>callback</code> to be active at a time. This means that the <code>callback</code> will finish executing before a new <code>callback</code> is scheduled. The following example shows how the <code>callback</code> will not be invoked again until its returning <code>promise</code> has settled. Even if the <code>dataView</code> is changed by marking or filtering. After the <code>callback</code> has finished executing, the <code>callback</code> is invoked again if there are any changed values. The <a href="/spotfire-mods/api-docs/visualization-mods/interfaces/Reader.html#hasExpired"><code>hasExpired</code></a> method can be used to check whether any <code>readables</code> have been invalidated while the <code>callback</code> has been executing.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">reader</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">mod</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">createReader</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">mod</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">visualization</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">data</span><span style="color:#000;font-weight:bold">());</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">reader</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">subscribe</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">async</span> <span style="color:#204a87;font-weight:bold">function</span> <span style="color:#000">render</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">dataView</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">log</span><span style="color:#000;font-weight:bold">(</span>
</span></span><span style="display:flex;"><span>        <span style="color:#4e9a06">&#34;Subscribe callback invoked, &#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">await</span> <span style="color:#000">dataView</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">allRows</span><span style="color:#000;font-weight:bold">()).</span><span style="color:#000">length</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#4e9a06">&#34; rows. Start 3 seconds sleep.&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">await</span> <span style="color:#000">sleep</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">3000</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">log</span><span style="color:#000;font-weight:bold">(</span>
</span></span><span style="display:flex;"><span>        <span style="color:#4e9a06">&#34;Render callback finished.&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#4e9a06">&#34;Has the reader while the callback was executed: &#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">await</span> <span style="color:#000">reader</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">hasExpired</span><span style="color:#000;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">});</span>
</span></span></code></pre></div><p><img src="/spotfire-mods/docs/visualization-mods/using-the-api/working-with-readables/subscribe.gif" alt="Demonstration of subscribe callback"></p>
<h4 id="oncecallback"><code>once(callback)</code></h4>
<p>When a developer wants to control the pace of updates, the <code>once</code> method can be used to wait for changes. <code>Once</code> will invoke its provided <code>callback</code> a single time, when one or more of the provided <code>readables</code> have changed.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">let</span> <span style="color:#000">loopsRunning</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">let</span> <span style="color:#000">count</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">reader</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">mod</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">createReader</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">mod</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">visualization</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">data</span><span style="color:#000;font-weight:bold">());</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">reader</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">once</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">async</span> <span style="color:#204a87;font-weight:bold">function</span> <span style="color:#000">render</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">dataView</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">loopsRunning</span><span style="color:#ce5c00;font-weight:bold">++</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">let</span> <span style="color:#000">id</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#ce5c00;font-weight:bold">++</span><span style="color:#000">count</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">await</span> <span style="color:#000">dataView</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">allRows</span><span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">log</span><span style="color:#000;font-weight:bold">(</span>
</span></span><span style="display:flex;"><span>        <span style="color:#4e9a06">&#34;Render callback invoked with id: &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">id</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#4e9a06">&#34;. Currently &#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">loopsRunning</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#4e9a06">&#34; loops active.&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#4e9a06">&#34;schedule once() again and start 3 seconds sleep.&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">reader</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">once</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">render</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">await</span> <span style="color:#000">sleep</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">3000</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">log</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Render callback finished with id:&#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">id</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">loopsRunning</span><span style="color:#ce5c00;font-weight:bold">--</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">});</span>
</span></span></code></pre></div><p><img src="/spotfire-mods/docs/visualization-mods/using-the-api/working-with-readables/once.gif" alt="Demonstration of once callback"></p>
<h4 id="hasexpired"><code>hasExpired()</code></h4>
<p>The <code>reader</code> keeps track of whether its readables are up to date or not. The <code>hasExpired</code> method can be invoked if you want to check whether all fetched values are up to date. This can be useful if your rendering loop takes a long time to complete and you want to quickly respond to changes.</p>
<p>The following example shows how a <code>reader</code> becomes expired after a mod property has been modified.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">reader</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">mod</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">createReader</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">mod</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">property</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;myProperty&#34;</span><span style="color:#000;font-weight:bold">));</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">reader</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">once</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">async</span> <span style="color:#204a87;font-weight:bold">function</span> <span style="color:#000">render</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">prop</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">log</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Render callback invoked &#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">prop</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">value</span><span style="color:#000;font-weight:bold">());</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">mod</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">transaction</span><span style="color:#000;font-weight:bold">(</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">=&gt;</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000">prop</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">set</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;next value&#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#204a87">Math</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">random</span><span style="color:#000;font-weight:bold">());</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">async</span> <span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">=&gt;</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000">log</span><span style="color:#000;font-weight:bold">(</span>
</span></span><span style="display:flex;"><span>                <span style="color:#4e9a06">&#34;Transaction complete. Reader has expired: &#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">await</span> <span style="color:#000">reader</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">hasExpired</span><span style="color:#000;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">log</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;End of callback. Reader has expired: &#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">await</span> <span style="color:#000">reader</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">hasExpired</span><span style="color:#000;font-weight:bold">());</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">});</span>
</span></span></code></pre></div><p>In this example the slow render loop is synthesized through a set of <code>sleep</code>s. Each time the mod is clicked, a mod property is updated and trigger a render loop. Since <code>subscribe</code> will only invoke the <code>callback</code> after it has finished, the <code>hasExpired</code> method can be used to trigger an early return of the render <code>callback</code>.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">reader</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">mod</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">createReader</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">mod</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">property</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;myProperty&#34;</span><span style="color:#000;font-weight:bold">));</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87">document</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">body</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">onclick</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">=&gt;</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">log</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Set new value for myProperty &#34;</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">mod</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">property</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;myProperty&#34;</span><span style="color:#000;font-weight:bold">).</span><span style="color:#000">set</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;next value&#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#204a87">Math</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">random</span><span style="color:#000;font-weight:bold">());</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">};</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">reader</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">subscribe</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">async</span> <span style="color:#204a87;font-weight:bold">function</span> <span style="color:#000">slowRender</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">prop</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">log</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Slow render started &#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">prop</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">value</span><span style="color:#000;font-weight:bold">());</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">await</span> <span style="color:#000">sleep</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">3000</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">await</span> <span style="color:#000">reader</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">hasExpired</span><span style="color:#000;font-weight:bold">())</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">log</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Reader has expired, return early to enter new loop&#34;</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">return</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">await</span> <span style="color:#000">sleep</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">3000</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">log</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;End of slow rendering&#34;</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">});</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">function</span> <span style="color:#000">sleep</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">ms</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#204a87">Promise</span><span style="color:#000;font-weight:bold">((</span><span style="color:#000">res</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">=&gt;</span> <span style="color:#000">setTimeout</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">res</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">ms</span><span style="color:#000;font-weight:bold">));</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">function</span> <span style="color:#000">log</span><span style="color:#000;font-weight:bold">(...</span><span style="color:#000">messages</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">let</span> <span style="color:#000">div</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87">document</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">createElement</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;div&#34;</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">div</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">textContent</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">messages</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">join</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34; &#34;</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87">document</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">body</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">appendChild</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">div</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">div</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">scrollIntoView</span><span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><h3 id="guidance-on-how-to-use-readers">Guidance on how to use readers</h3>
<ul>
<li>
<p>If two or more <code>readables</code> depend on each other, they should be part of the same <code>reader</code>. Separating <code>readers</code> from a performance concern is often a pre-optimization. The <code>reader</code> is keeping unchanged values in memory and only changed values are fetched. If there is a performance concern it can be better to check <a href="/spotfire-mods/docs/visualization-mods/using-the-api/working-with-readables/#knowing-what-changed">which value has changed</a> through reference equality with the previous value.</p>
</li>
<li>
<p>If you need an initial setup, this can be done in a <code>once</code> <code>callback</code>, followed by setting up a <code>subscribe</code> <code>callback</code>.</p>
</li>
<li>
<p>Use <code>hasExpired()</code> when your render loop takes a long time, in order to respond quicker to changes.</p>
</li>
</ul>
<h2 id="separating-initial-setup-from-updates">Separating initial setup from updates</h2>
<p>If a mod needs some initial setup before starting to listen for changes, <a href="/spotfire-mods/api-docs/visualization-mods/interfaces/Reader.html#once"><code>reader.once</code></a> can be used with a setup <code>callback</code>.</p>
<p>A <code>reader</code> will only trigger a new <code>callback</code> if any of its <code>Readables</code> has changed since it was last part of a <code>reader</code> <code>callback</code>. That means we can separate the setup from upcoming updates without triggering unnecessary <code>callbacks</code>.</p>
<p>In the following example, there are three <code>Readables</code>. They are first read together in an initial <code>once</code> <code>callback</code> as a setup for the mod. They are afterwards separated into two <code>readers</code>, one for the property and one for the rendering loop. Neither of the subscription <code>callbacks</code> will be invoked immediately. Instead they will wait until one of the <code>readables</code> change.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">setupReader</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">mod</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">createReader</span><span style="color:#000;font-weight:bold">(</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">mod</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">visualization</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">data</span><span style="color:#000;font-weight:bold">(),</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">mod</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">windowSize</span><span style="color:#000;font-weight:bold">(),</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">mod</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">property</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;myProperty&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">setupReader</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">once</span><span style="color:#000;font-weight:bold">((</span><span style="color:#000">dv</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">size</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">prop</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">=&gt;</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">log</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;All values are read&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">prop</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">value</span><span style="color:#000;font-weight:bold">());</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">propertyReader</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">mod</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">createReader</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">mod</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">property</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;myProperty&#34;</span><span style="color:#000;font-weight:bold">));</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">propertyReader</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">subscribe</span><span style="color:#000;font-weight:bold">((</span><span style="color:#000">myProperty</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">=&gt;</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">log</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Property has changed to&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">myProperty</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">value</span><span style="color:#000;font-weight:bold">());</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">});</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">renderReader</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">mod</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">createReader</span><span style="color:#000;font-weight:bold">(</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">mod</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">visualization</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">data</span><span style="color:#000;font-weight:bold">(),</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">mod</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">windowSize</span><span style="color:#000;font-weight:bold">()</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">renderReader</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">subscribe</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">async</span> <span style="color:#204a87;font-weight:bold">function</span> <span style="color:#000">render</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">dataView</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">windowSize</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">log</span><span style="color:#000;font-weight:bold">(</span>
</span></span><span style="display:flex;"><span>            <span style="color:#4e9a06">&#34;Render&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">await</span> <span style="color:#000">dataView</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">allRows</span><span style="color:#000;font-weight:bold">()).</span><span style="color:#000">length</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000">windowSize</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">height</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">});</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">setInterval</span><span style="color:#000;font-weight:bold">(()</span> <span style="color:#000;font-weight:bold">=&gt;</span> <span style="color:#000">prop</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">set</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;New value&#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#204a87">Math</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">random</span><span style="color:#000;font-weight:bold">()),</span> <span style="color:#0000cf;font-weight:bold">2000</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">});</span>
</span></span></code></pre></div><p>A <code>readable</code> can only be part of one <code>reader</code> at a time. <code>subscribe</code> and <code>once</code> will not invoke the <code>callback</code> until the <code>readable</code> changes</p>
<h2 id="knowing-what-changed">Knowing what changed</h2>
<p>Sometimes you want to know what changed inside of a <code>subscribe</code> <code>callback</code>, often in order to improve the performance of the mod.</p>
<ul>
<li>Reference equality</li>
<li>Unchanged values are reused.</li>
</ul>
<p><em>Note</em>. It might be an unnecessary sub optimization to check for changes.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">let</span> <span style="color:#000">reader</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">readerWithChangeChecker</span><span style="color:#000;font-weight:bold">(</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">mod</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">createReader</span><span style="color:#000;font-weight:bold">(</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">mod</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">visualization</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">data</span><span style="color:#000;font-weight:bold">(),</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">mod</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">windowSize</span><span style="color:#000;font-weight:bold">(),</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">mod</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">property</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;myProperty&#34;</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">reader</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">subscribe</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">async</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#000">dataview</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">size</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">prop</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">=&gt;</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">console</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">log</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Dataview&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">reader</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">hasValueChanged</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">dataview</span><span style="color:#000;font-weight:bold">));</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">console</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">log</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;size&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">reader</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">hasValueChanged</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">size</span><span style="color:#000;font-weight:bold">));</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">console</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">log</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;property&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">reader</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">hasValueChanged</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">prop</span><span style="color:#000;font-weight:bold">));</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">await</span> <span style="color:#000">dataview</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">allRows</span><span style="color:#000;font-weight:bold">();</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">setTimeout</span><span style="color:#000;font-weight:bold">(()</span> <span style="color:#000;font-weight:bold">=&gt;</span> <span style="color:#000">prop</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">set</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;New value&#34;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#204a87">Math</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">random</span><span style="color:#000;font-weight:bold">()),</span> <span style="color:#0000cf;font-weight:bold">2000</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">});</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">/**
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"> * Wrap a reader with an additional method called `hasChanged`.
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"> * It allows you to check whether a value is new or unchanged since the last time the subscribe loop was called.
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"> * @function
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"> * @template A
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"> * @param {A} reader
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"> * @returns {A &amp; {hasValueChanged(value: any):boolean}}
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">function</span> <span style="color:#000">readerWithChangeChecker</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">reader</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">let</span> <span style="color:#000">previousValues</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">[];</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">let</span> <span style="color:#000">currentValues</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">[];</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">function</span> <span style="color:#000">compareWithPreviousValues</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">cb</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87;font-weight:bold">function</span> <span style="color:#000">compareWithPreviousValues</span><span style="color:#000;font-weight:bold">(...</span><span style="color:#000">values</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000">previousValues</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">currentValues</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#000">currentValues</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">values</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">cb</span><span style="color:#000;font-weight:bold">(...</span><span style="color:#000">values</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">};</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">...</span><span style="color:#000">reader</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">subscribe</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">cb</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8f5902;font-style:italic">// @ts-ignore
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>            <span style="color:#000">reader</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">subscribe</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">compareWithPreviousValues</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">cb</span><span style="color:#000;font-weight:bold">));</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000">hasValueChanged</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">value</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">previousValues</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">indexOf</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">value</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">==</span> <span style="color:#ce5c00;font-weight:bold">-</span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">};</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><h2 id="readables">Readables</h2>
<p>Every set of data that can be consumed through the Mod API is encapsulated in a <code>Readable</code>. A <code>Readable</code> can be seen as a <code>Promise</code> combined with an identifier. In contrast to <code>Promises</code>, which are eager, <code>Readables</code> are lazy. It is lazy because it does not immediately start fetching its promised value. It only fetches the value it encapsulates if it is awaited or the <code>then</code> method is invoked.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">// This does not fetch any value from the server
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">myPropertyReadable</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">mod</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">property</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;myProperty&#34;</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">console</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">log</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">myPropertyReadable</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">// This fetches the latest value from the server.
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">myProperty</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">await</span> <span style="color:#000">mod</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">property</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;myProperty&#34;</span><span style="color:#000;font-weight:bold">);</span>
</span></span><span style="display:flex;"><span><span style="color:#000">console</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">log</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">myProperty</span><span style="color:#000;font-weight:bold">);</span>
</span></span></code></pre></div><h3 id="readableproxy">ReadableProxy</h3>
<p>If a value has synchronous methods, e.g a <a href="/spotfire-mods/api-docs/visualization-mods/interfaces/ModProperty.html#set">mod property</a>, a <code>ReadableProxy</code> will be returned from the API instead of a <code>Readable</code>. The <code>ReadableProxy</code> is a <code>Readable</code> augmented with all synchronous methods of the encapsulated value, without the need to await the encapuslated value. This means a property can be set, without knowing its value.</p>
<!-- When the encapsulated value of a Readable has a set of methods, the API returns a ReadableProxy instead.  -->
<p>In the following example the mod property <code>myProperty</code> is modified without awaiting its encapsulated value.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#000">mod</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">property</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;myProperty&#34;</span><span style="color:#000;font-weight:bold">).</span><span style="color:#000">set</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;new value&#34;</span><span style="color:#000;font-weight:bold">);</span>
</span></span></code></pre></div><ul>
<li><code>ReadableProxy</code> augment a <code>Readable/Promise</code> with additional methods.</li>
<li>Methods are accessible without awaiting the <code>Readable</code>.</li>
<li>Value can be awaited. Will always fetch the latest up to date value.</li>
<li>Modifications should be done on user interaction, not directly in a <code>reader</code> callback.</li>
</ul>
<h2 id="full-examples">Full examples</h2>
<p>All examples can bee downloaded <a href="/spotfire-mods/docs/visualization-mods/using-the-api/working-with-readables/examples.js">here</a>. They can be tested with one of the existing examples, such as the <a href="https://github.com/spotfiresoftware/spotfire-mods/tree/master/examples/js-dev-starter">js-dev-starter</a>.</p>

	
	
	<div class="text-muted mt-5 pt-3 border-top">Last modified June 14, 2024
</div>
</div>


          </main>
        </div>
      </div>
      
<footer class="bg-dark py-4 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Open the official Spotfire page on X" aria-label="Open the official Spotfire page on X">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://x.com/spotfire">
      <i class="fab fa-x-twitter"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Open the official Spotfire page on LinkedIn" aria-label="Open the official Spotfire page on LinkedIn">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/company/spotfire/">
      <i class="fab fa-linkedin"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Open the Dr. Spotfire YouTube channel" aria-label="Open the Dr. Spotfire YouTube channel">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://www.youtube.com/@drspotfire">
      <i class="fab fa-youtube"></i>
    </a>
  </li>
  
</ul>

        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Open the Facebook group for Spotfire users, partners, and practitioners" aria-label="Open the Facebook group for Spotfire users, partners, and practitioners">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://www.facebook.com/groups/651751391967838">
      <i class="fab fa-facebook"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Open the Spotfire user group on LinkedIn" aria-label="Open the Spotfire user group on LinkedIn">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/groups/12253057/">
      <i class="fab fa-linkedin"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://github.com/spotfiresoftware/spotfire-mods">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Spotfire Community" aria-label="Spotfire Community">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://spotfi.re/community/mods-overview">
      <i class="fa fa-comment-alt"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2025 Cloud Software Group All Rights Reserved</small>
        <small class="ml-1"><a href="https://www.cloud.com/privacy-policy" target="_blank">Privacy Policy</a></small>
	
		<p class="mt-2"><a href="/spotfire-mods/about/">About Spotfire Mods</a></p>
	
      </div>
    </div>
  </div>
</footer>


    </div>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>











<script src="/spotfire-mods/js/main.min.2e372965989862d7e055760988f44f8141d8237a114d3737f4f38d503db9494b.js" data-integrity="sha256-LjcpZZiYYtfgVXYJiPRPgUHYI3oRTTc39PONUD25SUs=" crossorigin="anonymous"></script>




  </body>
</html>